{"remainingRequest":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/Search.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/Search.vue","mtime":1655214447458},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/babel.config.js","mtime":1655079911438},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmRvdC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgcmVxdWVzdCBmcm9tICIuLi8uLi91dGlscy9yZXF1ZXN0IjsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC1wbHVzIjsKdmFyIHNlYXJjaElkOwp2YXIgdXNlckVtYWlsOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNlYXJjaCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBwYWdlU2l6ZTogNSwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlRm9yRGVsZXRlOiBmYWxzZSwKICAgICAgZGlhbG9nRm9ybVZpc2libGVGb3JDbGVhcjogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy/liJ3lp4vml7bliqDovb3ooajmoLzmlbDmja4KICAgIHRoaXMubG9hZERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5b2T5YmN6aG15pS55Y+YCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKCkgewogICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICB9LAogICAgLy/muIXnqbrljoblj7LorrDlvZUKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZUZvckNsZWFyID0gdHJ1ZTsKICAgIH0sCiAgICAvL+ehruiupOa4heepugogICAgY29uZm9ybUNsZWFyOiBmdW5jdGlvbiBjb25mb3JtQ2xlYXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXF1ZXN0LnBvc3QoIi9zZWFyY2gvY2xlYXJVc2VyU2VhcmNoIiwgdXNlckVtYWlsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5sb2FkRGF0YSgpOwoKICAgICAgICBfdGhpcy5kaWFsb2dGb3JtVmlzaWJsZUZvckNsZWFyID0gZmFsc2U7CiAgICAgICAgRWxNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfmuIXnqbrmiJDlip8nCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Yig6Zmk5pCc57Si6K6w5b2VCiAgICBkZWxldGU6IGZ1bmN0aW9uIF9kZWxldGUoaWQpIHsKICAgICAgc2VhcmNoSWQgPSBpZDsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZUZvckRlbGV0ZSA9IHRydWU7CiAgICB9LAogICAgLy/noa7orqTliKDpmaQKICAgIGNvbmZvcm1EZWxldGU6IGZ1bmN0aW9uIGNvbmZvcm1EZWxldGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmVxdWVzdC5wb3N0KCIvc2VhcmNoL2RlbGV0ZU9uZVNlYXJjaEJ5SWQiLCBzZWFyY2hJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLmxvYWREYXRhKCk7CgogICAgICAgIF90aGlzMi5kaWFsb2dGb3JtVmlzaWJsZUZvckRlbGV0ZSA9IGZhbHNlOwogICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+WKoOi9veihqOagvOaVsOaNrgogICAgbG9hZERhdGE6IGZ1bmN0aW9uIGxvYWREYXRhKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBlbWFpbCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJFbWFpbCIpOwogICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnIicsICJnIik7CiAgICAgIHVzZXJFbWFpbCA9IGVtYWlsLnJlcGxhY2UocmVnLCAiIik7IC8v5q2j5YiZ6KGo6L6+5byP77yM5bCG5a2X56ym5Liy5Lik56uv55qE5Y+M5byV5Y+35Y675o6JCgogICAgICByZXF1ZXN0LmdldCgiL3NlYXJjaC9nZXRBbGxTZWFyY2hCeVVzZXJFbWFpbCIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHVzZXJFbWFpbDogdXNlckVtYWlsLAogICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/Search.vue"],"names":[],"mappings":";;;;;;AA8CA,OAAO,OAAP,MAAoB,qBAApB;AACA,SAAQ,SAAR,QAAwB,cAAxB;AACA,IAAI,QAAJ;AACA,IAAI,SAAJ;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,SAAS,EAAE,EADN;AAIL,MAAA,KAAK,EAAE,CAJF;AAKL,MAAA,QAAQ,EAAE,CALL;AAML,MAAA,WAAW,EAAE,CANR;AAOL,MAAA,0BAA0B,EAAE,KAPvB;AAQL,MAAA,yBAAyB,EAAE;AARtB,KAAP;AAUD,GAbY;AAcb,EAAA,OAda,qBAcH;AACR;AACA,SAAK,QAAL;AACD,GAjBY;AAkBb,EAAA,OAAO,EAAE;AACP;AACA,IAAA,mBAFO,iCAEe;AACpB,WAAK,QAAL;AACD,KAJM;AAKP;AACA,IAAA,KANO,mBAMC;AACN,WAAK,yBAAL,GAAiC,IAAjC;AACD,KARM;AASP;AACA,IAAA,YAVO,0BAUQ;AAAA;;AACb,MAAA,OAAO,CAAC,IAAR,CAAa,yBAAb,EAAuC,SAAvC,EAAkD,IAAlD,CAAuD,UAAA,GAAE,EAAI;AAC3D,QAAA,KAAI,CAAC,QAAL;;AACA,QAAA,KAAI,CAAC,yBAAL,GAAiC,KAAjC;AACA,QAAA,SAAS,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE;AAFD,SAAD,CAAT;AAID,OAPD;AAQD,KAnBM;AAoBP;AACA,IAAA,MArBO,mBAqBA,EArBA,EAqBI;AACT,MAAA,QAAO,GAAI,EAAX;AACA,WAAK,0BAAL,GAAkC,IAAlC;AACD,KAxBM;AAyBP;AACA,IAAA,aA1BO,2BA0BS;AAAA;;AACd,MAAA,OAAO,CAAC,IAAR,CAAa,6BAAb,EAA2C,QAA3C,EAAqD,IAArD,CAA0D,UAAA,GAAE,EAAI;AAC9D,QAAA,MAAI,CAAC,QAAL;;AACA,QAAA,MAAI,CAAC,0BAAL,GAAkC,KAAlC;AACA,QAAA,SAAS,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE;AAFD,SAAD,CAAT;AAID,OAPD;AAQD,KAnCM;AAoCP;AACA,IAAA,QArCO,sBAqCI;AAAA;;AACT,UAAI,KAAI,GAAI,cAAc,CAAC,OAAf,CAAuB,WAAvB,CAAZ;AACA,UAAI,GAAE,GAAI,IAAI,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAV;AACA,MAAA,SAAQ,GAAI,KAAK,CAAC,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAAZ,CAHS,CAG8B;;AACvC,MAAA,OAAO,CAAC,GAAR,CAAY,iCAAZ,EAA8C;AAC5C,QAAA,MAAM,EAAE;AACN,UAAA,SAAS,EAAE,SADL;AAEN,UAAA,WAAW,EAAE,KAAK,WAFZ;AAGN,UAAA,QAAQ,EAAE,KAAK;AAHT;AADoC,OAA9C,EAMG,IANH,CAMQ,UAAA,GAAE,EAAI;AACZ,QAAA,MAAI,CAAC,KAAL,GAAa,GAAG,CAAC,IAAJ,CAAS,KAAtB;AACA,QAAA,MAAI,CAAC,SAAL,GAAiB,GAAG,CAAC,IAAJ,CAAS,OAA1B;AACD,OATD;AAUF;AAnDO;AAlBI,CAAf","sourcesContent":["<template>\n  <el-button type=\"primary\" class=\"el1\" @click=\"clear()\">清空搜索记录</el-button>\n  <div class=\"dF\">\n    <el-table :data=\"tableData\" border class=\"el2\">\n      <el-table-column prop=\"content\" label=\"搜索内容\" width=\"\" align=\"center\" />\n      <el-table-column label=\"操作\" width=\"\" align=\"center\" key=\"slot\">\n        <!--此处使用了插槽，来实现获得某行的对象-->\n        <template #default=\"scope\" >\n          <el-button type=\"text\" size=\"big\" @click=\"this.delete(scope.row.id)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--分页组件-->\n    <el-pagination\n        background\n        layout=\"total, prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        v-model:currentPage=\"currentPage\"\n        @current-change=\"handleCurrentChange\"\n        class=\"el3\">\n    </el-pagination>\n  </div>\n  <!--删除搜索记录弹窗-->\n  <el-dialog v-model=\"dialogFormVisibleForDelete\" title=\"删除搜索记录\">\n    <span>是否确认删除该搜索记录？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForDelete = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformDelete()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n  <!--清空搜索记录弹窗-->\n  <el-dialog v-model=\"dialogFormVisibleForClear\" title=\"清空搜索记录\">\n    <span>是否确认清空搜索记录？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForClear = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformClear()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport request from \"../../utils/request\";\nimport {ElMessage} from \"element-plus\";\nlet searchId;\nlet userEmail;\n\nexport default {\n  name: \"Search\",\n  data() {\n    return {\n      tableData: [\n\n      ],\n      total: 0,\n      pageSize: 5,\n      currentPage: 1,\n      dialogFormVisibleForDelete: false,\n      dialogFormVisibleForClear: false\n    }\n  },\n  created() {\n    //初始时加载表格数据\n    this.loadData()\n  },\n  methods: {\n    //当前页改变\n    handleCurrentChange() {\n      this.loadData()\n    },\n    //清空历史记录\n    clear() {\n      this.dialogFormVisibleForClear = true\n    },\n    //确认清空\n    conformClear() {\n      request.post(\"/search/clearUserSearch\",userEmail).then(res =>{\n        this.loadData()\n        this.dialogFormVisibleForClear = false\n        ElMessage({\n          type: 'success',\n          message: '清空成功'\n        })\n      })\n    },\n    //删除搜索记录\n    delete(id) {\n      searchId = id\n      this.dialogFormVisibleForDelete = true\n    },\n    //确认删除\n    conformDelete() {\n      request.post(\"/search/deleteOneSearchById\",searchId).then(res =>{\n        this.loadData()\n        this.dialogFormVisibleForDelete = false\n        ElMessage({\n          type: 'success',\n          message: '删除成功'\n        })\n      })\n    },\n    //加载表格数据\n    loadData() {\n      let email = sessionStorage.getItem(\"userEmail\")\n      let reg = new RegExp('\"', \"g\");\n      userEmail = email.replace(reg, \"\");    //正则表达式，将字符串两端的双引号去掉\n      request.get(\"/search/getAllSearchByUserEmail\",{\n        params: {\n          userEmail: userEmail,\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res =>{\n        this.total = res.data.total\n        this.tableData = res.data.records\n      })\n    }\n  },\n}\n</script>\n\n<style scoped>\n.el1{\n  position: absolute;left: 5%;margin-top: 50px;\n}\n.dF{\n  width: 90%;position: absolute;left: 5%;right: 5%;margin-top: 100px;\n}\n.el2{\n  width: 100%;\n}\n.el3{\n  margin-top: 15px;\n}\n</style>"],"sourceRoot":""}]}