{"ast":null,"code":"import request from \"../../utils/request\";\nimport E from \"wangeditor\";\nimport { ElMessage } from \"element-plus\";\nimport moment from 'moment';\nlet editor;\nlet rowForUpdate;\nexport default {\n  name: \"NewsListForFirst\",\n\n  data() {\n    return {\n      tableData: [],\n      total: 0,\n      pageSize: 5,\n      currentPage: 1,\n      formForEdit: {\n        idEdit: '',\n        headlineEdit: '',\n        contentEdit: '',\n        dateEdit: '',\n        typeEdit: '',\n        clickEdit: 0,\n        commentEdit: 0,\n        firstEdit: 1\n      },\n      lists: [],\n      dialogFormVisibleForEdit: false,\n      dialogFormVisibleForDelete: false,\n      dialogFormVisibleForFirst: false,\n      search: ''\n    };\n  },\n\n  created() {\n    this.loadData();\n  },\n\n  methods: {\n    //关键词搜索\n    searchByInput() {\n      request.get(\"/news_User/searchNewsForFirst\", {\n        params: {\n          search: this.search,\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        this.tableData = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n\n    //格式化日期\n    timeFilter(row, column, cellValue, index) {\n      const date = row[column.property];\n\n      if (date != null) {\n        return moment(date).format(\"YYYY-MM-DD\");\n      }\n    },\n\n    //当前页码改变\n    handleCurrentChange() {\n      this.loadData();\n    },\n\n    //加载数据\n    loadData() {\n      request.get(\"/news_User/getAllNewsForFirst\", {\n        params: {\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        this.tableData = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n\n    //查看详情\n    look(row) {\n      this.$router.push({\n        path: '/newsContent',\n        params: {\n          newsId: row.id\n        }\n      });\n    },\n\n    //修改新闻\n    edit(row) {\n      //显示修改窗口\n      this.dialogFormVisibleForEdit = true; //加载富文本编辑器\n\n      this.$nextTick(() => {\n        editor = new E('#div1');\n        editor.config.zIndex = 500;\n        editor.create();\n      }); //回显富文本编辑器\n\n      this.$nextTick(() => {\n        let content = row.content;\n        editor.txt.html(content);\n      }); //加载下拉列表数据\n\n      request.post(\"/type/getAllType\").then(res => {\n        this.lists = res.data;\n      }); //绑定数据\n\n      this.formForEdit.idEdit = row.id;\n      this.formForEdit.headlineEdit = row.headline;\n      this.formForEdit.dateEdit = row.date;\n      this.formForEdit.typeEdit = row.type;\n      this.formForEdit.clickEdit = row.click;\n      this.formForEdit.commentEdit = row.comment;\n    },\n\n    //确认修改\n    conformEdit() {\n      this.formForEdit.contentEdit = editor.txt.html();\n\n      if (this.formForEdit.headlineEdit === null || this.formForEdit.headlineEdit === \"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请输入标题'\n        });\n      } else if (this.formForEdit.dateEdit === null || this.formForEdit.dateEdit === \"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请选择日期'\n        });\n      } else if (this.formForEdit.typeEdit === null || this.formForEdit.typeEdit === \"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请选择板块'\n        });\n      } else if (this.formForEdit.contentEdit === null || this.formForEdit.contentEdit === \"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请输入内容'\n        });\n      } else {\n        let formForEdit = {\n          id: this.formForEdit.idEdit,\n          headline: this.formForEdit.headlineEdit,\n          content: this.formForEdit.contentEdit,\n          date: this.formForEdit.dateEdit,\n          type: this.formForEdit.typeEdit,\n          click: this.formForEdit.clickEdit,\n          comment: this.formForEdit.commentEdit,\n          first: this.formForEdit.firstEdit\n        };\n        request.post(\"/news/editNews\", formForEdit).then(res => {\n          ElMessage({\n            type: 'success',\n            message: '修改成功'\n          });\n          this.dialogFormVisibleForEdit = false;\n          this.loadData();\n        });\n      }\n    },\n\n    //取消置顶新闻\n    first(row) {\n      rowForUpdate = row;\n      this.dialogFormVisibleForFirst = true;\n    },\n\n    //确认取消置顶\n    conformFirst() {\n      request.post(\"/news/setNewsNotFirst\", rowForUpdate.id).then(res => {\n        ElMessage({\n          type: 'success',\n          message: '取消置顶成功'\n        });\n        this.loadData();\n        this.dialogFormVisibleForFirst = false;\n      });\n    },\n\n    //删除新闻\n    delete(row) {\n      rowForUpdate = row;\n      this.dialogFormVisibleForDelete = true;\n    },\n\n    //确认删除\n    conformDelete() {\n      request.post(\"/news/deleteNews\", rowForUpdate.id).then(res => {\n        ElMessage({\n          type: 'success',\n          message: '删除成功'\n        });\n        this.loadData();\n        this.dialogFormVisibleForDelete = false;\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","E","ElMessage","moment","editor","rowForUpdate","name","data","tableData","total","pageSize","currentPage","formForEdit","idEdit","headlineEdit","contentEdit","dateEdit","typeEdit","clickEdit","commentEdit","firstEdit","lists","dialogFormVisibleForEdit","dialogFormVisibleForDelete","dialogFormVisibleForFirst","search","created","loadData","methods","searchByInput","get","params","then","res","records","timeFilter","row","column","cellValue","index","date","property","format","handleCurrentChange","look","$router","push","path","newsId","id","edit","$nextTick","config","zIndex","create","content","txt","html","post","headline","type","click","comment","conformEdit","message","first","conformFirst","delete","conformDelete"],"sourceRoot":"","sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/views/admin/NewsListForFirst.vue"],"sourcesContent":["<template>\n  <div class=\"dF\">\n    <el-input v-model=\"search\" placeholder=\"请输入关键词\" class=\"el1\" />\n    <el-button type=\"primary\" @click=\"searchByInput()\">搜索</el-button>\n  </div>\n  <div class=\"dS\">\n    <el-table :data=\"tableData\" border class=\"el2\">\n      <el-table-column prop=\"id\" label=\"编号\" width=\"\" align=\"center\" v-if=\"false\" />\n      <el-table-column prop=\"headline\" label=\"标题\" width=\"\" align=\"center\" />\n      <el-table-column prop=\"petname\" label=\"作者\" width=\"150\" align=\"center\" />\n      <el-table-column prop=\"type\" label=\"板块\" width=\"100\" align=\"center\" />\n      <el-table-column prop=\"content\" label=\"内容\" width=\"100\" align=\"center\"  v-if=\"false\"/>\n      <el-table-column prop=\"date\" label=\"发布日期\" width=\"100\" align=\"center\" :formatter=\"timeFilter\"/>\n      <el-table-column prop=\"click\" label=\"点击量\" width=\"70\" align=\"center\" />\n      <el-table-column prop=\"comment\" label=\"评论量\" width=\"70\" align=\"center\" />\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\" key=\"slot\">\n        <!--此处使用了插槽，来实现获得某行的对象-->\n        <template #default=\"scope\" >\n          <el-button type=\"text\" size=\"big\" @click=\"this.look(scope.row)\">查看</el-button>\n          <el-button type=\"text\" size=\"big\" @click=\"this.edit(scope.row)\">修改</el-button>\n          <el-button type=\"text\" size=\"big\" @click=\"this.first(scope.row)\">取消置顶</el-button>\n          <el-button type=\"text\" size=\"big\" @click=\"this.delete(scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--分页组件-->\n    <el-pagination\n        background\n        layout=\"total, prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        v-model:currentPage=\"currentPage\"\n        @current-change=\"handleCurrentChange\"\n        class=\"el3\">\n    </el-pagination>\n  </div>\n  <!--修改新闻弹窗，点击修改时才显示-->\n  <el-dialog v-model=\"dialogFormVisibleForEdit\" title=\"修改新闻\" width=\"60%\">\n    <el-form\n        :model=\"formForEdit\"\n        label-width=\"80px\">\n      <el-form-item label=\"标题\" prop=\"headline\">\n        <el-input v-model=\"formForEdit.headlineEdit\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"日期\">\n        <el-col :span=\"11\"><el-form-item prop=\"date\"><el-date-picker v-model=\"formForEdit.dateEdit\" type=\"date\" placeholder=\"请选择日期\" style=\"width: 100%\"></el-date-picker></el-form-item></el-col>\n      </el-form-item>\n      <el-form-item label=\"板块\" prop=\"type\">\n        <el-select v-model=\"formForEdit.typeEdit\" placeholder=\"请选择板块\" class=\"el4\">\n          <el-option\n              v-for=\"item in lists\"\n              :key=\"item.name\"\n              :label=\"item.name\"\n              :value=\"item.name\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"内容\" prop=\"content\">\n        <!--富文本编辑器-->\n        <div id=\"div1\">\n        </div>\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForEdit=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformEdit()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n\n  <!--删除新闻弹窗，点击删除时才显示-->\n  <el-dialog v-model=\"dialogFormVisibleForDelete\" title=\"删除新闻\">\n    <span>是否确认删除该新闻？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForDelete = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformDelete()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n\n  <!--取消置顶新闻弹窗，点击取消置顶时才显示-->\n  <el-dialog v-model=\"dialogFormVisibleForFirst\" title=\"取消置顶\">\n    <span>是否确认取消置顶该新闻？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForFirst = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformFirst()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n\n</template>\n\n<script>\nimport request from \"../../utils/request\";\nimport E from \"wangeditor\";\nimport {ElMessage} from \"element-plus\";\nimport moment from 'moment';\nlet editor;\nlet rowForUpdate;\n\nexport default {\n  name: \"NewsListForFirst\",\n  data() {\n    return {\n      tableData: [\n\n      ],\n      total: 0,\n      pageSize: 5,\n      currentPage: 1,\n      formForEdit: {\n        idEdit: '',\n        headlineEdit: '',\n        contentEdit: '',\n        dateEdit: '',\n        typeEdit: '',\n        clickEdit: 0,\n        commentEdit: 0,\n        firstEdit: 1\n      },\n      lists: [\n\n      ],\n      dialogFormVisibleForEdit: false,\n      dialogFormVisibleForDelete: false,\n      dialogFormVisibleForFirst: false,\n      search: ''\n    }\n  },\n  created() {\n    this.loadData()\n\n  },\n  methods: {\n    //关键词搜索\n    searchByInput() {\n      request.get(\"/news_User/searchNewsForFirst\",{\n        params: {\n          search: this.search,\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res =>{\n        this.tableData = res.data.records\n        this.total = res.data.total\n      })\n    },\n    //格式化日期\n    timeFilter(row, column, cellValue, index) {\n      const date = row[column.property]\n      if(date !=null){\n        return moment(date).format(\"YYYY-MM-DD\")\n      }\n    },\n    //当前页码改变\n    handleCurrentChange() {\n      this.loadData()\n    },\n    //加载数据\n    loadData() {\n      request.get(\"/news_User/getAllNewsForFirst\",{\n        params: {\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        this.tableData = res.data.records\n        this.total = res.data.total\n      })\n    },\n    //查看详情\n    look(row) {\n      this.$router.push({\n        path: '/newsContent',\n        params: {\n          newsId: row.id\n        }\n      })\n    },\n    //修改新闻\n    edit(row) {\n      //显示修改窗口\n      this.dialogFormVisibleForEdit = true\n      //加载富文本编辑器\n      this.$nextTick(() => {\n        editor = new E('#div1')\n        editor.config.zIndex = 500\n        editor.create()\n      })\n      //回显富文本编辑器\n      this.$nextTick(() => {\n        let content = row.content\n        editor.txt.html(content)\n      })\n      //加载下拉列表数据\n      request.post(\"/type/getAllType\").then(res =>{\n        this.lists = res.data\n      })\n      //绑定数据\n      this.formForEdit.idEdit = row.id\n      this.formForEdit.headlineEdit = row.headline\n      this.formForEdit.dateEdit = row.date\n      this.formForEdit.typeEdit = row.type\n      this.formForEdit.clickEdit = row.click\n      this.formForEdit.commentEdit = row.comment\n    },\n    //确认修改\n    conformEdit() {\n      this.formForEdit.contentEdit = editor.txt.html()\n      if (this.formForEdit.headlineEdit===null||this.formForEdit.headlineEdit===\"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请输入标题'\n        })\n      }else if (this.formForEdit.dateEdit===null||this.formForEdit.dateEdit===\"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请选择日期'\n        })\n      }else if (this.formForEdit.typeEdit===null||this.formForEdit.typeEdit===\"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请选择板块'\n        })\n      }else if (this.formForEdit.contentEdit===null||this.formForEdit.contentEdit===\"\"){\n        ElMessage({\n          type: 'warning',\n          message: '请输入内容'\n        })\n      }else {\n        let formForEdit =  {\n          id: this.formForEdit.idEdit,\n          headline: this.formForEdit.headlineEdit,\n          content: this.formForEdit.contentEdit,\n          date: this.formForEdit.dateEdit,\n          type: this.formForEdit.typeEdit,\n          click: this.formForEdit.clickEdit,\n          comment: this.formForEdit.commentEdit,\n          first: this.formForEdit.firstEdit\n        }\n        request.post(\"/news/editNews\",formForEdit).then(res =>{\n          ElMessage({\n            type: 'success',\n            message: '修改成功'\n          })\n          this.dialogFormVisibleForEdit = false\n          this.loadData()\n        })\n      }\n    },\n    //取消置顶新闻\n    first(row) {\n      rowForUpdate = row\n      this.dialogFormVisibleForFirst = true\n    },\n    //确认取消置顶\n    conformFirst() {\n      request.post(\"/news/setNewsNotFirst\",rowForUpdate.id).then(res =>{\n        ElMessage({\n          type: 'success',\n          message: '取消置顶成功'\n        })\n        this.loadData()\n        this.dialogFormVisibleForFirst = false\n      })\n    },\n    //删除新闻\n    delete(row) {\n      rowForUpdate = row\n      this.dialogFormVisibleForDelete = true\n    },\n    //确认删除\n    conformDelete() {\n      request.post(\"/news/deleteNews\",rowForUpdate.id).then(res =>{\n        ElMessage({\n          type: 'success',\n          message: '删除成功'\n        })\n        this.loadData()\n        this.dialogFormVisibleForDelete = false\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dF{\n  width: 90%;position: absolute;left: 5%;right: 5%;margin-top: 50px;\n}\n.el1{\n  width: 300px;margin-right: 20px;\n}\n.dS{\n  width: 90%;position: absolute;left: 5%;right: 5%;margin-top: 100px;\n}\n.el2{\n  width: 100%;\n}\n.el3{\n  margin-top: 15px;\n}\n.el-col-11[data-v-7ccc5e12]{\n  max-width: 100%;width: 100%;\n}\n.el4{\n  width: 100%;\n}\n</style>"]},"metadata":{},"sourceType":"module"}