{"ast":null,"code":"import request from \"../../utils/request\";\nlet rowForEdit;\nexport default {\n  name: \"AdminList\",\n\n  data() {\n    return {\n      tableData: [],\n\n      /*\n          分页插件的三个基本参数为total，pageSize，currentPage，\n          其中加载数据时需要将pageSize和currentPage传到后端，\n          结合Mybatis-plus中的分页插件便可以实现分页查询\n       */\n      total: 0,\n      //总条数，从后端获取\n      pageSize: 5,\n      //每页显示的条数\n      currentPage: 1,\n      //当前所在页\n      dialogFormVisibleForDownRole: false\n    };\n  },\n\n  methods: {\n    //加载表格数据（结合分页操作，因此加载数据时需要将pageSize和currentPage传到后端）\n    loadData() {\n      request.get(\"/user/getAllUserAdmin\", {\n        params: {\n          pageSize: this.pageSize,\n          currentPage: this.currentPage\n        }\n      }).then(res => {\n        this.total = res.data.total; //返回总条数\n\n        this.tableData = res.data.records;\n      });\n    },\n\n    //管理员降级\n    downRole(row) {\n      rowForEdit = row;\n      this.dialogFormVisibleForDownRole = true;\n    },\n\n    //确认降级\n    conform() {\n      request.post(\"/user/downRole\", rowForEdit.email).then(res => {\n        this.loadData();\n        this.dialogFormVisibleForDownRole = false;\n      });\n    },\n\n    //当前页码改变（例如点击下一页、上一页等操作）\n    handleCurrentChange() {\n      //重新加载数据\n      this.loadData();\n    }\n\n  },\n\n  created() {\n    this.loadData();\n  }\n\n};","map":{"version":3,"mappings":"AAuCA,OAAOA,OAAP,MAAoB,qBAApB;AACA,IAAIC,UAAJ;AAEA,eAAe;EACbC,IAAI,EAAE,WADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,SAAS,EAAC,EADL;;MAIL;;;;;MAKAC,KAAK,EAAE,CATF;MASY;MACjBC,QAAQ,EAAE,CAVL;MAUY;MACjBC,WAAW,EAAE,CAXR;MAWY;MACjBC,4BAA4B,EAAE;IAZzB,CAAP;EAcD,CAjBY;;EAkBbC,OAAO,EAAE;IACP;IACAC,QAAQ,GAAG;MACTV,OAAO,CAACW,GAAR,CAAY,uBAAZ,EAAoC;QAClCC,MAAM,EAAE;UACNN,QAAQ,EAAE,KAAKA,QADT;UAENC,WAAW,EAAE,KAAKA;QAFZ;MAD0B,CAApC,EAKGM,IALH,CAKQC,GAAE,IAAI;QACZ,KAAKT,KAAL,GAAaS,GAAG,CAACX,IAAJ,CAASE,KAAtB,CADY,CACiB;;QAC7B,KAAKD,SAAL,GAAiBU,GAAG,CAACX,IAAJ,CAASY,OAA1B;MACD,CARD;IASD,CAZM;;IAaP;IACAC,QAAQ,CAACC,GAAD,EAAM;MACZhB,UAAS,GAAIgB,GAAb;MACA,KAAKT,4BAAL,GAAoC,IAApC;IACD,CAjBM;;IAkBP;IACAU,OAAO,GAAG;MACRlB,OAAO,CAACmB,IAAR,CAAa,gBAAb,EAA8BlB,UAAU,CAACmB,KAAzC,EAAgDP,IAAhD,CAAqDC,GAAE,IAAI;QACzD,KAAKJ,QAAL;QACA,KAAKF,4BAAL,GAAoC,KAApC;MACD,CAHD;IAID,CAxBM;;IAyBP;IACAa,mBAAmB,GAAE;MACnB;MACA,KAAKX,QAAL;IACF;;EA7BO,CAlBI;;EAiDbY,OAAO,GAAG;IACR,KAAKZ,QAAL;EACF;;AAnDa,CAAf","names":["request","rowForEdit","name","data","tableData","total","pageSize","currentPage","dialogFormVisibleForDownRole","methods","loadData","get","params","then","res","records","downRole","row","conform","post","email","handleCurrentChange","created"],"sourceRoot":"","sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/views/superAdmin/AdminList.vue"],"sourcesContent":["<template>\n  <span class=\"sp1\">提示：管理员降级后将恢复为用户</span>\n  <span class=\"sp2\">提示：0代表用户，1代表管理员，3代表待审核管理员</span>\n  <div class=\"dF\">\n    <el-table :data=\"tableData\" border class=\"el1\">\n      <el-table-column prop=\"email\" label=\"邮箱\" width=\"350\" align=\"center\" />\n      <el-table-column prop=\"petname\" label=\"昵称\" width=\"\" align=\"center\" />\n      <el-table-column prop=\"role\" label=\"当前角色\" width=\"150\" align=\"center\" />\n      <el-table-column label=\"操作\" width=\"150\" align=\"center\" key=\"slot\">\n        <!--此处使用了插槽，来实现获得某行的对象-->\n        <template #default=\"scope\" >\n          <el-button type=\"text\" size=\"big\" @click=\"this.downRole(scope.row)\">降级</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--分页组件-->\n    <el-pagination\n        background\n        layout=\"total, prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        v-model:currentPage=\"currentPage\"\n        @current-change=\"handleCurrentChange\"\n        class=\"el2\">\n    </el-pagination>\n  </div>\n  <!--管理员降级弹窗，点击降级时才显示-->\n  <el-dialog v-model=\"dialogFormVisibleForDownRole\" title=\"管理员降级\">\n    <span>是否确认将该管理员降为用户？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForDownRole = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conform()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport request from \"../../utils/request\";\nlet rowForEdit;\n\nexport default {\n  name: \"AdminList\",\n  data() {\n    return {\n      tableData:[\n\n      ],\n      /*\n          分页插件的三个基本参数为total，pageSize，currentPage，\n          其中加载数据时需要将pageSize和currentPage传到后端，\n          结合Mybatis-plus中的分页插件便可以实现分页查询\n       */\n      total: 0,        //总条数，从后端获取\n      pageSize: 5,     //每页显示的条数\n      currentPage: 1,  //当前所在页\n      dialogFormVisibleForDownRole: false\n    }\n  },\n  methods: {\n    //加载表格数据（结合分页操作，因此加载数据时需要将pageSize和currentPage传到后端）\n    loadData() {\n      request.get(\"/user/getAllUserAdmin\",{\n        params: {\n          pageSize: this.pageSize,\n          currentPage: this.currentPage\n        }\n      }).then(res =>{\n        this.total = res.data.total  //返回总条数\n        this.tableData = res.data.records\n      })\n    },\n    //管理员降级\n    downRole(row) {\n      rowForEdit = row\n      this.dialogFormVisibleForDownRole = true\n    },\n    //确认降级\n    conform() {\n      request.post(\"/user/downRole\",rowForEdit.email).then(res =>{\n        this.loadData()\n        this.dialogFormVisibleForDownRole = false\n      })\n    },\n    //当前页码改变（例如点击下一页、上一页等操作）\n    handleCurrentChange(){\n      //重新加载数据\n      this.loadData()\n    }\n  },\n  created() {\n    this.loadData()\n  }\n}\n</script>\n\n<style scoped>\n.sp1{\n  position: absolute;margin-top: 50px;left: 5%;font-size: 13px;color: red;\n}\n.sp2{\n  position: absolute;margin-top: 70px;left: 5%;font-size: 13px;color: red;\n}\n.dF{\n  width: 90%;position: absolute;left: 5%;right: 5%;margin-top: 100px;\n}\n.el1{\n  width: 100%;\n}\n.el2{\n  margin-top: 15px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}