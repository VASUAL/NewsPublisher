{"remainingRequest":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wangjin/Desktop/newspublisher/Vue/src/views/admin/UserManage.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wangjin/Desktop/newspublisher/Vue/src/views/admin/UserManage.vue","mtime":1655214210445},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/babel.config.js","mtime":1655079911438},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiLi4vLi4vdXRpbHMvcmVxdWVzdCI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKdmFyIGVkaXRvcjsKdmFyIHJvd0ZvclVwZGF0ZTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyTWFuYWdlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIHBhZ2VTaXplOiA1LAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgZGlhbG9nRm9ybVZpc2libGVGb3JEZWxldGU6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5qC85byP5YyW5pel5pyfCiAgICB0aW1lRmlsdGVyOiBmdW5jdGlvbiB0aW1lRmlsdGVyKHJvdywgY29sdW1uLCBjZWxsVmFsdWUsIGluZGV4KSB7CiAgICAgIHZhciBkYXRlID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07CgogICAgICBpZiAoZGF0ZSAhPSBudWxsKSB7CiAgICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgfQogICAgfSwKICAgIC8v5b2T5YmN6aG156CB5pS55Y+YCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKCkgewogICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICB9LAogICAgLy/liqDovb3mlbDmja4KICAgIGxvYWREYXRhOiBmdW5jdGlvbiBsb2FkRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJlcXVlc3QuZ2V0KCIvdXNlci9nZXRBbGxVc2VyTm90QWRtaW4iLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSwKICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5yZWNvcmRzOwogICAgICAgIF90aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Yig6Zmk55So5oi3CiAgICBkZWxldGU6IGZ1bmN0aW9uIF9kZWxldGUocm93KSB7CiAgICAgIHJvd0ZvclVwZGF0ZSA9IHJvdzsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZUZvckRlbGV0ZSA9IHRydWU7CiAgICB9LAogICAgLy/noa7orqTliKDpmaQKICAgIGNvbmZvcm1EZWxldGU6IGZ1bmN0aW9uIGNvbmZvcm1EZWxldGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmVxdWVzdC5wb3N0KCIvdXNlci9kZWxldGVVc2VyQnlFbWFpbCIsIHJvd0ZvclVwZGF0ZS5lbWFpbCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgRWxNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8nCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMi5sb2FkRGF0YSgpOyAvL+ivt+axguWQjueahOaTjeS9nOimgeaUvuWIsOivt+axgueahOWkp+aLrOWPt+mHjOmdou+8jOWQpuWImeW8guatpeaTjeS9nOS8mumAoOaIkOWKoOi9veaXtuaVsOaNruayoeacieabtOaWsAoKCiAgICAgICAgX3RoaXMyLmRpYWxvZ0Zvcm1WaXNpYmxlRm9yRGVsZXRlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/views/admin/UserManage.vue"],"names":[],"mappings":"AAuCA,OAAO,OAAP,MAAoB,qBAApB;AACA,SAAQ,SAAR,QAAwB,cAAxB;AACA,OAAO,MAAP,MAAmB,QAAnB;AAEA,IAAI,MAAJ;AACA,IAAI,YAAJ;AACA,eAAe;AACb,EAAA,IAAI,EAAE,YADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,SAAS,EAAE,EADN;AAIL,MAAA,KAAK,EAAE,CAJF;AAKL,MAAA,QAAQ,EAAE,CALL;AAML,MAAA,WAAW,EAAE,CANR;AAOL,MAAA,0BAA0B,EAAE;AAPvB,KAAP;AASD,GAZY;AAab,EAAA,OAba,qBAaH;AACR,SAAK,QAAL;AACD,GAfY;AAgBb,EAAA,OAAO,EAAE;AACP;AACA,IAAA,UAFO,sBAEI,GAFJ,EAES,MAFT,EAEiB,SAFjB,EAE4B,KAF5B,EAEmC;AACxC,UAAM,IAAG,GAAI,GAAG,CAAC,MAAM,CAAC,QAAR,CAAhB;;AACA,UAAG,IAAG,IAAI,IAAV,EAAe;AACb,eAAO,MAAM,CAAC,IAAD,CAAN,CAAa,MAAb,CAAoB,YAApB,CAAP;AACF;AACD,KAPM;AAQP;AACA,IAAA,mBATO,iCASe;AACpB,WAAK,QAAL;AACD,KAXM;AAYP;AACA,IAAA,QAbO,sBAaI;AAAA;;AACT,MAAA,OAAO,CAAC,GAAR,CAAY,0BAAZ,EAAuC;AACrC,QAAA,MAAM,EAAE;AACN,UAAA,WAAW,EAAE,KAAK,WADZ;AAEN,UAAA,QAAQ,EAAE,KAAK;AAFT;AAD6B,OAAvC,EAKG,IALH,CAKQ,UAAA,GAAE,EAAK;AACb,QAAA,KAAI,CAAC,SAAL,GAAiB,GAAG,CAAC,IAAJ,CAAS,OAA1B;AACA,QAAA,KAAI,CAAC,KAAL,GAAa,GAAG,CAAC,IAAJ,CAAS,KAAtB;AACD,OARD;AASD,KAvBM;AAwBP;AACA,IAAA,MAzBO,mBAyBA,GAzBA,EAyBK;AACV,MAAA,YAAW,GAAI,GAAf;AACA,WAAK,0BAAL,GAAkC,IAAlC;AACD,KA5BM;AA6BP;AACA,IAAA,aA9BO,2BA8BS;AAAA;;AACd,MAAA,OAAO,CAAC,IAAR,CAAa,yBAAb,EAAuC,YAAY,CAAC,KAApD,EAA2D,IAA3D,CAAgE,UAAA,GAAE,EAAI;AACpE,QAAA,SAAS,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE;AAFD,SAAD,CAAT;;AAIA,QAAA,MAAI,CAAC,QAAL,GALoE,CAK9C;;;AACtB,QAAA,MAAI,CAAC,0BAAL,GAAkC,KAAlC;AACD,OAPD;AAQF;AAvCO;AAhBI,CAAf","sourcesContent":["<template>\n  <div class=\"dF\">\n    <el-table :data=\"tableData\" border class=\"el2\">\n      <el-table-column prop=\"email\" label=\"邮箱\" width=\"\" align=\"center\" />\n      <el-table-column prop=\"petname\" label=\"昵称\" width=\"\" align=\"center\" />\n      <el-table-column prop=\"sex\" label=\"性别\" width=\"50\" align=\"center\" />\n      <el-table-column prop=\"birthday\" label=\"生日\" width=\"100\" align=\"center\" :formatter=\"timeFilter\" />\n      <el-table-column prop=\"area\" label=\"地区\" width=\"140\" align=\"center\" />\n      <el-table-column label=\"操作\" width=\"60\" align=\"center\" key=\"slot\">\n        <!--此处使用了插槽，来实现获得某行的对象-->\n        <template #default=\"scope\" >\n          <el-button type=\"text\" size=\"big\" @click=\"this.delete(scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--分页组件-->\n    <el-pagination\n        background\n        layout=\"total, prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        v-model:currentPage=\"currentPage\"\n        @current-change=\"handleCurrentChange\"\n        class=\"el1\">\n    </el-pagination>\n  </div>\n  <!--删除用户弹窗，点击删除时才显示-->\n  <el-dialog v-model=\"dialogFormVisibleForDelete\" title=\"删除用户\">\n    <span>是否确认删除该用户？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForDelete = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformDelete()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport request from \"../../utils/request\";\nimport {ElMessage} from \"element-plus\";\nimport moment from 'moment';\n\nlet editor;\nlet rowForUpdate;\nexport default {\n  name: \"UserManage\",\n  data() {\n    return {\n      tableData: [\n\n      ],\n      total: 0,\n      pageSize: 5,\n      currentPage: 1,\n      dialogFormVisibleForDelete: false,\n    }\n  },\n  created() {\n    this.loadData()\n  },\n  methods: {\n    //格式化日期\n    timeFilter(row, column, cellValue, index) {\n      const date = row[column.property]\n      if(date !=null){\n        return moment(date).format(\"YYYY-MM-DD\")\n      }\n    },\n    //当前页码改变\n    handleCurrentChange() {\n      this.loadData()\n    },\n    //加载数据\n    loadData() {\n      request.get(\"/user/getAllUserNotAdmin\",{\n        params: {\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        this.tableData = res.data.records\n        this.total = res.data.total\n      })\n    },\n    //删除用户\n    delete(row) {\n      rowForUpdate = row\n      this.dialogFormVisibleForDelete = true\n    },\n    //确认删除\n    conformDelete() {\n      request.post(\"/user/deleteUserByEmail\",rowForUpdate.email).then(res =>{\n        ElMessage({\n          type: 'success',\n          message: '删除成功'\n        })\n        this.loadData()       //请求后的操作要放到请求的大括号里面，否则异步操作会造成加载时数据没有更新\n        this.dialogFormVisibleForDelete = false\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dF{\n  width: 90%;position: absolute;left: 5%;right: 5%;margin-top: 50px;\n}\n.el1{\n  margin-top: 15px;\n}\n.el2{\n  width: 100%;\n}\n</style>"],"sourceRoot":""}]}