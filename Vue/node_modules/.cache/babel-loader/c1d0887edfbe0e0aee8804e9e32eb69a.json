{"remainingRequest":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/RequestToAdmin.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/RequestToAdmin.vue","mtime":1655214403378},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/babel.config.js","mtime":1655079911438},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmRvdC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgVXNlciBmcm9tICJAZWxlbWVudC1wbHVzL2ljb25zL2xpYi9Vc2VyIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiLi4vLi4vdXRpbHMvcmVxdWVzdCI7CmltcG9ydCAkIGZyb20gJy4uLy4uL2Fzc2V0cy9qcy9qcXVlcnktMy42LjAnOwppbXBvcnQgeyBFbE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXBsdXMiOwp2YXIgdXNlckVtYWlsOwp2YXIgcm9sZTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZXF1ZXN0VG9BZG1pbiIsCiAgY29tcG9uZW50czogewogICAgVXNlcjogVXNlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlRm9yUmVxdWVzdDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+eUs+ivt+aIkOS4uueuoeeQhuWRmAogICAgcmVxdWVzdFRvQWRtaW46IGZ1bmN0aW9uIHJlcXVlc3RUb0FkbWluKCkgewogICAgICBpZiAocm9sZSA9PT0gMCkgewogICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVGb3JSZXF1ZXN0ID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAxKSB7CiAgICAgICAgRWxNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfmgqjlt7LmmK/nrqHnkIblkZgnCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gMikgewogICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICBtZXNzYWdlOiAn5oKo5bey5piv566h55CG5ZGYJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICBtZXNzYWdlOiAn5a6h5qC45Lit77yM6K+36ICQ5b+D562J5b6FJwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/noa7orqTnlLPor7cKICAgIGNvbmZvcm1SZXF1ZXN0OiBmdW5jdGlvbiBjb25mb3JtUmVxdWVzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJlcXVlc3QucG9zdCgiL3VzZXIvY2hhbmdlVXNlclRvQWRtaW5Gb3JSZXF1ZXN0IiwgdXNlckVtYWlsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBFbE1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+W3suaPkOS6pOeUs+ivt++8jOivt+iAkOW/g+etieW+hScKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMubG9hZERhdGEoKTsKCiAgICAgICAgX3RoaXMuZGlhbG9nRm9ybVZpc2libGVGb3JSZXF1ZXN0ID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Yqg6L295pWw5o2uCiAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEoKSB7CiAgICAgIHZhciBlbWFpbCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJFbWFpbCIpOwogICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnIicsICJnIik7CiAgICAgIHVzZXJFbWFpbCA9IGVtYWlsLnJlcGxhY2UocmVnLCAiIik7IC8v5q2j5YiZ6KGo6L6+5byP77yM5bCG5a2X56ym5Liy5Lik56uv55qE5Y+M5byV5Y+35Y675o6JCgogICAgICByZXF1ZXN0LnBvc3QoIi91c2VyL2dldFJvbGUiLCB1c2VyRW1haWwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJvbGUgPSByZXMuZGF0YTsKCiAgICAgICAgaWYgKHJvbGUgPT09IDApIHsKICAgICAgICAgICQoJyNyb2xlJykuaHRtbCgi55So5oi3Iik7CiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAxKSB7CiAgICAgICAgICAkKCcjcm9sZScpLmh0bWwoIueuoeeQhuWRmCIpOwogICAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gMikgewogICAgICAgICAgJCgnI3JvbGUnKS5odG1sKCLotoXnuqfnrqHnkIblkZgiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCgnI3JvbGUnKS5odG1sKCLlvoXlrqHmoLjnmoTnrqHnkIblkZgiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZERhdGEoKTsKICB9Cn07"},{"version":3,"sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/RequestToAdmin.vue"],"names":[],"mappings":";;;;;;AAsCA,OAAO,IAAP,MAAiB,8BAAjB;AACA,OAAO,OAAP,MAAoB,qBAApB;AACA,OAAO,CAAP,MAAc,8BAAd;AACA,SAAQ,SAAR,QAAwB,cAAxB;AACA,IAAI,SAAJ;AACA,IAAI,IAAJ;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,gBADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,IAAI,EAAJ;AADU,GAFC;AAKb,EAAA,IALa,kBAKN;AACL,WAAO;AACL,MAAA,2BAA2B,EAAE;AADxB,KAAP;AAGD,GATY;AAUb,EAAA,OAAO,EAAE;AACP;AACA,IAAA,cAFO,4BAEU;AACf,UAAI,IAAI,KAAG,CAAX,EAAc;AACZ,aAAK,2BAAL,GAAmC,IAAnC;AACD,OAFD,MAEM,IAAI,IAAI,KAAG,CAAX,EAAc;AAClB,QAAA,SAAS,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE;AAFD,SAAD,CAAT;AAID,OALK,MAKA,IAAI,IAAI,KAAG,CAAX,EAAc;AAClB,QAAA,SAAS,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE;AAFD,SAAD,CAAT;AAID,OALK,MAKA;AACJ,QAAA,SAAS,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE;AAFD,SAAD,CAAT;AAIF;AACD,KArBM;AAsBP;AACA,IAAA,cAvBO,4BAuBU;AAAA;;AACf,MAAA,OAAO,CAAC,IAAR,CAAa,mCAAb,EAAiD,SAAjD,EAA4D,IAA5D,CAAiE,UAAA,GAAE,EAAI;AACrE,QAAA,SAAS,CAAC;AACR,UAAA,IAAI,EAAE,SADE;AAER,UAAA,OAAO,EAAE;AAFD,SAAD,CAAT;;AAIA,QAAA,KAAI,CAAC,QAAL;;AACA,QAAA,KAAI,CAAC,2BAAL,GAAmC,KAAnC;AACD,OAPD;AAQD,KAhCM;AAiCP;AACA,IAAA,QAlCO,sBAkCI;AACT,UAAI,KAAI,GAAI,cAAc,CAAC,OAAf,CAAuB,WAAvB,CAAZ;AACA,UAAI,GAAE,GAAI,IAAI,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAV;AACA,MAAA,SAAQ,GAAI,KAAK,CAAC,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAAZ,CAHS,CAG8B;;AACvC,MAAA,OAAO,CAAC,IAAR,CAAa,eAAb,EAA6B,SAA7B,EAAwC,IAAxC,CAA6C,UAAA,GAAE,EAAI;AACjD,QAAA,IAAG,GAAI,GAAG,CAAC,IAAX;;AACA,YAAI,IAAI,KAAG,CAAX,EAAc;AACZ,UAAA,CAAC,CAAC,OAAD,CAAD,CAAW,IAAX,CAAgB,IAAhB;AACD,SAFD,MAEM,IAAI,IAAI,KAAG,CAAX,EAAc;AAClB,UAAA,CAAC,CAAC,OAAD,CAAD,CAAW,IAAX,CAAgB,KAAhB;AACD,SAFK,MAEA,IAAI,IAAI,KAAG,CAAX,EAAc;AAClB,UAAA,CAAC,CAAC,OAAD,CAAD,CAAW,IAAX,CAAgB,OAAhB;AACD,SAFK,MAEA;AACJ,UAAA,CAAC,CAAC,OAAD,CAAD,CAAW,IAAX,CAAgB,SAAhB;AACF;AACD,OAXD;AAYF;AAlDO,GAVI;AA8Db,EAAA,OA9Da,qBA8DH;AACR,SAAK,QAAL;AACF;AAhEa,CAAf","sourcesContent":["<template>\n  <!--详细描述-->\n  <div class=\"dF\">\n    <el-descriptions\n        class=\"margin-top\"\n        title=\"权限信息\"\n        direction=\"vertical\"\n        :column=\"1\"\n        border>\n      <template #extra>\n        <el-button @click=\"requestToAdmin()\" type=\"primary\">申请成为管理员</el-button>\n      </template>\n      <el-descriptions-item>\n        <template #label>\n          <div class=\"cell-item\">\n            <el-icon>\n              <user />\n            </el-icon>\n            当前角色\n          </div>\n        </template>\n        <el-tag size=\"big\"><span id=\"role\"></span></el-tag>\n      </el-descriptions-item>\n    </el-descriptions>\n  </div>\n  <!--申请弹窗-->\n  <el-dialog v-model=\"dialogFormVisibleForRequest\" title=\"管理员申请\">\n    <span>是否确认申请成为管理员？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForRequest = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformRequest()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport User from \"@element-plus/icons/lib/User\";\nimport request from \"../../utils/request\";\nimport $ from '../../assets/js/jquery-3.6.0';\nimport {ElMessage} from \"element-plus\";\nlet userEmail;\nlet role;\n\nexport default {\n  name: \"RequestToAdmin\",\n  components: {\n    User,\n  },\n  data() {\n    return {\n      dialogFormVisibleForRequest: false\n    }\n  },\n  methods: {\n    //申请成为管理员\n    requestToAdmin() {\n      if (role===0) {\n        this.dialogFormVisibleForRequest = true\n      }else if (role===1) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        })\n      }else if (role===2) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        })\n      }else {\n        ElMessage({\n          type: 'warning',\n          message: '审核中，请耐心等待'\n        })\n      }\n    },\n    //确认申请\n    conformRequest() {\n      request.post(\"/user/changeUserToAdminForRequest\",userEmail).then(res =>{\n        ElMessage({\n          type: 'success',\n          message: '已提交申请，请耐心等待'\n        })\n        this.loadData()\n        this.dialogFormVisibleForRequest = false\n      })\n    },\n    //加载数据\n    loadData() {\n      let email = sessionStorage.getItem(\"userEmail\")\n      let reg = new RegExp('\"', \"g\");\n      userEmail = email.replace(reg, \"\");    //正则表达式，将字符串两端的双引号去掉\n      request.post(\"/user/getRole\",userEmail).then(res =>{\n        role = res.data\n        if (role===0) {\n          $('#role').html(\"用户\");\n        }else if (role===1) {\n          $('#role').html(\"管理员\");\n        }else if (role===2) {\n          $('#role').html(\"超级管理员\");\n        }else {\n          $('#role').html(\"待审核的管理员\");\n        }\n      })\n    }\n  },\n  created() {\n    this.loadData()\n  }\n}\n</script>\n\n<style scoped>\n.dF{\n  width: 60%;position: absolute;left: 15%;right: 5%;margin-top: 120px;\n}\n</style>"],"sourceRoot":""}]}