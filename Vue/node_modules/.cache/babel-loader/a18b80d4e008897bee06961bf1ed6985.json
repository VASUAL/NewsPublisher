{"ast":null,"code":"import request from \"../utils/request\";\nimport moment from \"moment\";\nimport { ElMessage } from \"element-plus\";\nimport ArrowDown from \"@element-plus/icons/lib/ArrowDown\";\nimport $ from \"../assets/js/jquery-3.6.0\";\nlet userEmail;\nexport default {\n  name: \"SearchResult\",\n  components: {\n    ArrowDown\n  },\n\n  data() {\n    return {\n      tableDataForNewsList: [],\n      total: 0,\n      currentPage: 1,\n      pageSize: 10,\n      tableDataForUserHobby: [],\n      searchContent: '',\n      loginVisible: false,\n      notLoginVisible: false,\n      boyHead: false,\n      girlHead: false\n    };\n  },\n\n  created() {\n    let str = sessionStorage.getItem(\"userEmail\");\n\n    if (str === null || str === \"\") {\n      userEmail = str;\n    } else {\n      let reg = new RegExp('\"', \"g\");\n      userEmail = str.replace(reg, \"\"); //正则表达式，将字符串两端的双引号去掉\n    }\n\n    this.loadLoginStateAndPetname();\n    this.loadData();\n    this.loadHobbyNews();\n  },\n\n  methods: {\n    //退出登录\n    logout() {\n      sessionStorage.removeItem(\"userEmail\");\n      this.$router.push('/');\n      this.loginVisible = false;\n      this.notLoginVisible = true;\n    },\n\n    //加载时判断是否登录\n    loadLoginStateAndPetname() {\n      let userEmail = sessionStorage.getItem(\"userEmail\");\n\n      if (userEmail === null || userEmail === '') {\n        //说明未登录\n        this.notLoginVisible = true;\n        this.loginVisible = false;\n      } else {\n        this.notLoginVisible = false;\n        this.loginVisible = true;\n        let reg = new RegExp('\"', \"g\");\n        let newStr = userEmail.replace(reg, \"\"); //正则表达式，将字符串两端的双引号去掉\n\n        request.post(\"/user/get\", newStr).then(res => {\n          $('#petname').text(res.data.petname);\n\n          if (res.data.sex === \"女\") {\n            this.girlHead = true;\n            this.boyHead = false;\n          } else {\n            this.girlHead = false;\n            this.boyHead = true;\n          }\n        });\n      }\n    },\n\n    //搜索\n    search() {\n      if (this.searchContent === null || this.searchContent === '') {\n        ElMessage({\n          type: 'warning',\n          message: '搜索内容不能为空'\n        });\n      } else if (userEmail === null || userEmail === \"\") {\n        request.get(\"/news/searchNews\", {\n          params: {\n            searchContent: this.searchContent,\n            currentPage: this.currentPage,\n            pageSize: this.pageSize\n          }\n        }).then(res => {\n          for (let i = 0; i < res.data.records.length; i++) {\n            res.data.records[i].date = moment(res.data.records[i].date).format(\"YYYY-MM-DD\");\n          }\n\n          this.tableDataForNewsList = res.data.records;\n          this.total = res.data.total;\n          this.loadHobbyNews();\n        });\n      } else {\n        request.get(\"/search/saveUserSearchContent\", {\n          params: {\n            userEmail: userEmail,\n            searchContent: this.searchContent\n          }\n        }).then(res => {\n          request.get(\"/news/searchNews\", {\n            params: {\n              searchContent: this.searchContent,\n              currentPage: this.currentPage,\n              pageSize: this.pageSize\n            }\n          }).then(res => {\n            for (let i = 0; i < res.data.records.length; i++) {\n              res.data.records[i].date = moment(res.data.records[i].date).format(\"YYYY-MM-DD\");\n            }\n\n            this.tableDataForNewsList = res.data.records;\n            this.total = res.data.total;\n            this.loadHobbyNews();\n          });\n        });\n      }\n    },\n\n    //进入新闻详情页\n    intoNewsContent(id) {\n      this.$router.push({\n        path: '/newsContent',\n        query: {\n          newsId: id\n        }\n      });\n    },\n\n    //加载搜索数据\n    loadData() {\n      let searchContent = this.$route.query.searchContent; //搜索内容\n\n      request.get(\"/news/searchNews\", {\n        params: {\n          searchContent: searchContent,\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        for (let i = 0; i < res.data.records.length; i++) {\n          res.data.records[i].date = moment(res.data.records[i].date).format(\"YYYY-MM-DD\");\n        }\n\n        this.tableDataForNewsList = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n\n    handleCurrentChange() {\n      this.loadData();\n    },\n\n    //清空搜索记录\n    clearSearch() {\n      if (userEmail === null || userEmail === \"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请登录或注册后重试'\n        });\n      } else {\n        request.post(\"/search/clearUserSearch\", userEmail).then(res => {\n          ElMessage({\n            type: 'success',\n            message: '已重置'\n          });\n          this.loadHobbyNews();\n        });\n      }\n    },\n\n    //加载兴趣推荐数据\n    loadHobbyNews() {\n      if (userEmail === null || userEmail === \"\") {//未登录\n      } else {\n        request.post(\"/news/getNewsByUserSearch\", userEmail).then(res => {\n          this.tableDataForUserHobby = res.data;\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","moment","ElMessage","ArrowDown","$","userEmail","name","components","data","tableDataForNewsList","total","currentPage","pageSize","tableDataForUserHobby","searchContent","loginVisible","notLoginVisible","boyHead","girlHead","created","str","sessionStorage","getItem","reg","RegExp","replace","loadLoginStateAndPetname","loadData","loadHobbyNews","methods","logout","removeItem","$router","push","newStr","post","then","res","text","petname","sex","search","type","message","get","params","i","records","length","date","format","intoNewsContent","id","path","query","newsId","$route","handleCurrentChange","clearSearch"],"sourceRoot":"","sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/layout/SearchResult.vue"],"sourcesContent":["<template>\n  <!--头部-->\n  <div class=\"dF\">\n    <img src=\"../assets/photo/logo.png\" alt=\"\" class=\"im1\">\n    <el-input v-model=\"searchContent\" placeholder=\"搜索网站内容\"  class=\"el1\"/>\n    <el-button type=\"primary\" class=\"el2\" @click=\"search()\">搜索</el-button>\n    <!--登录状态显示-->\n    <div v-if=\"loginVisible\" class=\"dS\">\n      <img v-if=\"boyHead\" src=\"../assets/photo/boy.png\" alt=\"\" class=\"im2\">\n      <img v-if=\"girlHead\" src=\"../assets/photo/girl.png\" alt=\"\" class=\"im3\">\n      <!--下拉菜单-->\n      <el-dropdown class=\"el3\">\n        <span class=\"el-dropdown-link\">\n          <span id=\"petname\" class=\"sp1\"></span>\n          <el-icon class=\"el-icon--right\">\n            <arrow-down class=\"a1\" />\n          </el-icon>\n        </span>\n        <template #dropdown>\n          <el-dropdown-menu>\n            <el-dropdown-item @click=\"$router.push('/userHome')\">个人中心</el-dropdown-item>\n            <el-dropdown-item @click=\"logout()\">退出</el-dropdown-item>\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n    </div>\n    <!--未登录状态显示-->\n    <div v-if=\"notLoginVisible\" class=\"dT\">\n      <router-link to=\"/userLogin\" class=\"r1\">登录/注册</router-link>\n    </div>\n  </div>\n  <!--左部列表-->\n  <div id=\"left\" class=\"d4\">\n    <el-table :data=\"tableDataForNewsList\" class=\"el4\" :cell-style=\"{background:'#ffffff'}\" :show-header=\"false\">\n      <el-table-column label=\"\" width=\"\">\n        <template #default=\"scope\">\n          <table class=\"t1\">\n            <tr class=\"tr1\" id=\"row\">\n              <td colspan=\"6\"><span @click=\"intoNewsContent(scope.row.id)\" class=\"sp2\">[{{scope.row.type}}]&nbsp;{{scope.row.headline}}</span></td>\n            </tr>\n            <tr class=\"tr2\">\n              <td class=\"td1\"><img src=\"../assets/photo/uptime.png\" alt=\"\" class=\"im4\"></td>\n              <td class=\"td2\">{{scope.row.date}}</td>\n              <td class=\"td3\"><img src=\"../assets/photo/click.png\" alt=\"\" class=\"im5\"></td>\n              <td class=\"td4\">{{scope.row.click}}</td>\n              <td class=\"td5\"><img src=\"../assets/photo/comment.png\" alt=\"\" class=\"im6\"></td>\n              <td class=\"td6\">{{scope.row.comment}}</td>\n            </tr>\n          </table>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--分页组件-->\n    <el-pagination\n        background\n        layout=\"total, prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        v-model:currentPage=\"currentPage\"\n        @current-change=\"handleCurrentChange\"\n        class=\"el5\">\n    </el-pagination>\n  </div>\n  <!--右边-->\n  <div class=\"d5\">\n    <table class=\"t2\">\n      <tr class=\"tr3\">\n        <td class=\"td7\">兴趣推荐</td>\n        <td class=\"td8\"><img src=\"../assets/photo/change.png\" alt=\"\" class=\"im7\"></td>\n        <td><el-button @click=\"clearSearch()\" type=\"text\" href=\"refresh_hobby\" class=\"el6\">重置</el-button></td>\n      </tr>\n      <tr class=\"tr4\">\n        <td colspan=\"3\" class=\"td9\">基于用户搜索记录</td>\n      </tr>\n    </table>\n    <el-table :data=\"tableDataForUserHobby\" class=\"el7\" :cell-style=\"{background:'#ffffff'}\" :show-header=\"false\">\n      <el-table-column label=\"\" width=\"\">\n        <template #default=\"scope\">\n          <table class=\"t3\">\n            <tr>\n              <td colspan=\"3\" class=\"td10\"><span @click=\"intoNewsContent(scope.row.id)\" class=\"sp3\">●&nbsp;{{scope.row.headline}}</span></td>\n            </tr>\n          </table>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n\n</template>\n\n<script>\nimport request from \"../utils/request\";\nimport moment from \"moment\";\nimport {ElMessage} from \"element-plus\";\nimport ArrowDown from \"@element-plus/icons/lib/ArrowDown\";\nimport $ from \"../assets/js/jquery-3.6.0\";\n\nlet userEmail;\nexport default {\n  name: \"SearchResult\",\n  components: {\n    ArrowDown,\n  },\n  data() {\n    return {\n      tableDataForNewsList: [\n\n      ],\n      total: 0,\n      currentPage: 1,\n      pageSize: 10,\n      tableDataForUserHobby: [\n\n      ],\n      searchContent: '',\n      loginVisible: false,\n      notLoginVisible: false,\n      boyHead: false,\n      girlHead: false\n    }\n  },\n  created() {\n    let str = sessionStorage.getItem(\"userEmail\");\n    if (str===null||str===\"\") {\n      userEmail = str\n    }else {\n      let reg = new RegExp('\"', \"g\");\n      userEmail = str.replace(reg, \"\");    //正则表达式，将字符串两端的双引号去掉\n    }\n    this.loadLoginStateAndPetname()\n    this.loadData()\n    this.loadHobbyNews()\n  },\n  methods: {\n    //退出登录\n    logout() {\n      sessionStorage.removeItem(\"userEmail\")\n      this.$router.push('/')\n      this.loginVisible = false\n      this.notLoginVisible = true\n    },\n    //加载时判断是否登录\n    loadLoginStateAndPetname() {\n      let userEmail = sessionStorage.getItem(\"userEmail\")\n      if (userEmail===null||userEmail==='') {   //说明未登录\n        this.notLoginVisible = true\n        this.loginVisible = false\n\n      }else {\n        this.notLoginVisible = false\n        this.loginVisible = true\n        let reg = new RegExp('\"', \"g\");\n        let newStr = userEmail.replace(reg, \"\");    //正则表达式，将字符串两端的双引号去掉\n        request.post(\"/user/get\",newStr).then(res =>{\n          $('#petname').text(res.data.petname)\n          if (res.data.sex===\"女\") {\n            this.girlHead = true\n            this.boyHead = false\n          }else {\n            this.girlHead = false\n            this.boyHead = true\n          }\n        })\n      }\n    },\n    //搜索\n    search() {\n      if (this.searchContent===null||this.searchContent==='') {\n        ElMessage({\n          type: 'warning',\n          message: '搜索内容不能为空'\n        })\n      }else if (userEmail===null||userEmail===\"\") {\n        request.get(\"/news/searchNews\",{\n          params: {\n            searchContent: this.searchContent,\n            currentPage: this.currentPage,\n            pageSize: this.pageSize\n          }\n        }).then(res =>{\n          for (let i=0;i<res.data.records.length;i++) {\n            res.data.records[i].date = moment(res.data.records[i].date).format(\"YYYY-MM-DD\")\n          }\n          this.tableDataForNewsList = res.data.records\n          this.total = res.data.total\n          this.loadHobbyNews()\n        })\n      }else {\n        request.get(\"/search/saveUserSearchContent\",{\n          params: {\n            userEmail: userEmail,\n            searchContent: this.searchContent\n          }\n        }).then(res =>{\n          request.get(\"/news/searchNews\",{\n            params: {\n              searchContent: this.searchContent,\n              currentPage: this.currentPage,\n              pageSize: this.pageSize\n            }\n          }).then(res =>{\n            for (let i=0;i<res.data.records.length;i++) {\n              res.data.records[i].date = moment(res.data.records[i].date).format(\"YYYY-MM-DD\")\n            }\n            this.tableDataForNewsList = res.data.records\n            this.total = res.data.total\n            this.loadHobbyNews()\n          })\n        })\n      }\n    },\n    //进入新闻详情页\n    intoNewsContent(id) {\n      this.$router.push({\n        path: '/newsContent',\n        query: {\n          newsId: id\n        }\n      })\n    },\n    //加载搜索数据\n    loadData() {\n      let searchContent = this.$route.query.searchContent            //搜索内容\n      request.get(\"/news/searchNews\",{\n        params: {\n          searchContent: searchContent,\n          currentPage: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(res =>{\n        for (let i=0;i<res.data.records.length;i++) {\n          res.data.records[i].date = moment(res.data.records[i].date).format(\"YYYY-MM-DD\")\n        }\n        this.tableDataForNewsList = res.data.records\n        this.total = res.data.total\n      })\n    },\n    handleCurrentChange() {\n      this.loadData()\n    },\n    //清空搜索记录\n    clearSearch(){\n      if (userEmail===null||userEmail===\"\") {\n        ElMessage({\n          type: 'warning',\n          message: '请登录或注册后重试'\n        })\n      }else {\n        request.post(\"/search/clearUserSearch\",userEmail).then(res =>{\n          ElMessage({\n            type: 'success',\n            message: '已重置'\n          })\n          this.loadHobbyNews()\n        })\n      }\n    },\n    //加载兴趣推荐数据\n    loadHobbyNews() {\n      if (userEmail===null||userEmail===\"\") {   //未登录\n\n      }else {\n        request.post(\"/news/getNewsByUserSearch\",userEmail).then(res =>{\n          this.tableDataForUserHobby = res.data\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-table tbody tr:hover>td {\n  background-color:#ffffff!important\n}\n.dF{\n  background: white;height: 50px;width: 100%;border-bottom: 1.5px #f0f0f0 solid;position: absolute;margin-top: 0;\n}\n.im1{\n  position: absolute;height: 65%;top: 50%;transform: translate(-50%,-50%);left: 20%;\n}\n.el1{\n  position: absolute;width: 23%;height: 40px;transform: translate(-50%,-50%);left: 48%;top: 50%;\n}\n.el2{\n  position: absolute;width: 70px;height: 40px;transform: translate(-50%, -50%);left: 65%;top: 50%;\n}\n.dS{\n  position: absolute;width: 20%;height: 40px;transform: translate(-50%,-50%);top: 50%;left: 80%;text-align: center;\n}\n.im2{\n  height: 40px;width: 40px;margin-left: -10px;\n}\n.im3{\n  height: 40px;width: 40px;margin-left: -10px;\n}\n.el3{\n  position: absolute;transform: translate(-50%,-50%);left: 80%;top: 50%;font-size: 16px;width: 150px;text-align: center;\n}\n.sp1{\n  font-size: 15px;\n}\n.a1{\n  position: relative;top: 3px;\n}\n.dT{\n  position: absolute;transform: translate(-50%, -50%);left: 80%;top: 50%;font-size: 16px;width: 100px;text-align: center;\n}\n.r1{\n  color:black;\n}\n.d4{\n  position: absolute;height: auto;width: 43%;background: white;left: 15%;margin-top: 70px;padding-right: 17px;padding-left: 17px;box-shadow: 0 0 3px 3px #f3f3f3;\n}\n.el4{\n  width: 100%;\n}\n.t1{\n  width: 100%;\n}\n.tr1{\n  height: 70px;\n}\n.sp2{\n  cursor:pointer;text-decoration: none;font-size: 18px;color: black;\n}\n.tr2{\n  height: 40px;\n}\n.td1{\n  text-align: right;\n}\n.td2{\n  width: 25%;\n}\n.td3{\n  width: 6%;\n}\n.td4{\n  width: 8%;\n}\n.td5{\n  width: 6%;\n}\n.td6{\n  width: 8%;\n}\n.im4{\n  height: 30px;width: 30px;\n}\n.im5{\n  height: 30px;width: 30px;\n}\n.im6{\n  height: 30px;width: 30px;\n}\n.el5{\n  margin-top: 30px;margin-bottom: 30px\n}\n.d5{\n  position: absolute;width: 18%;height: auto;right: 15%;background: white;margin-top: 70px;box-shadow: 0 0 3px 3px #f3f3f3;padding-right: 17px;padding-left: 17px;padding-bottom: 17px;\n}\n.t2{\n  width: 100%;\n}\n.tr3{\n  line-height: 50px;font-size: 18px;text-align: left;\n}\n.td7{\n  width: 45%;\n}\n.td8{\n  width: 7%;\n}\n.im7{\n  height: 16px;width: 16px;position: relative;top: 3px;\n}\n.el6{\n  text-align: left;text-decoration: none;color: red;font-size: 14px;\n}\n.tr4{\n  line-height: 15px;font-size: 13px;text-align: left;\n}\n.td9{\n  width: 45%;\n}\n.el7{\n  width: 100%;\n}\n.t3{\n  width: 100%;\n}\n.td10{\n  padding-top: 10px;padding-bottom: 10px;\n}\n.sp3{\n  cursor:pointer;font-size: 15px;color: black;text-decoration: none;\n}\n</style>"]},"metadata":{},"sourceType":"module"}