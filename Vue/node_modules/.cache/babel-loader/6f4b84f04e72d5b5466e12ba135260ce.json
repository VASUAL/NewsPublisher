{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7de22f82\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"dF\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"申请成为管理员\");\n\nconst _hoisted_3 = {\n  class: \"cell-item\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 当前角色 \");\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  id: \"role\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"是否确认申请成为管理员？\", -1\n/* HOISTED */\n));\n\nconst _hoisted_7 = {\n  class: \"dialog-footer\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"取消\");\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"确定\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_user = _resolveComponent(\"user\");\n\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"详细描述\"), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_descriptions, {\n    class: \"margin-top\",\n    title: \"权限信息\",\n    direction: \"vertical\",\n    column: 1,\n    border: \"\"\n  }, {\n    extra: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[0] || (_cache[0] = $event => $options.requestToAdmin()),\n      type: \"primary\"\n    }, {\n      default: _withCtx(() => [_hoisted_2]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    default: _withCtx(() => [_createVNode(_component_el_descriptions_item, null, {\n      label: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_user)]),\n        _: 1\n        /* STABLE */\n\n      }), _hoisted_4])]),\n      default: _withCtx(() => [_createVNode(_component_el_tag, {\n        size: \"big\"\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  })]), _createCommentVNode(\"申请弹窗\"), _createVNode(_component_el_dialog, {\n    modelValue: $data.dialogFormVisibleForRequest,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.dialogFormVisibleForRequest = $event),\n    title: \"管理员申请\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_7, [_createVNode(_component_el_button, {\n      onClick: _cache[1] || (_cache[1] = $event => $data.dialogFormVisibleForRequest = false)\n    }, {\n      default: _withCtx(() => [_hoisted_8]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: _cache[2] || (_cache[2] = $event => $options.conformRequest())\n    }, {\n      default: _withCtx(() => [_hoisted_9]),\n      _: 1\n      /* STABLE */\n\n    })])]),\n    default: _withCtx(() => [_hoisted_6]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\"])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;EAEOA,KAAK,EAAC;;;iDAQ+C;;;EAI7CA,KAAK,EAAC;;;iDAGC;;gEAIKC,oBAAuB,MAAvB,EAAuB;EAAjBC,EAAE,EAAC;AAAc,CAAvB,EAAe,IAAf,EAAe;AAAA;AAAf;;gEAMvBD,oBAAyB,MAAzB,EAAyB,IAAzB,EAAM,cAAN,EAAkB;AAAA;AAAlB;;;EAEQD,KAAK,EAAC;;;iDAC8C;;iDACJ;;;;;;;;;;;;;;;;;6DA9B1DG,6BACAF,oBAsBM,KAtBN,cAsBM,CArBJG,aAoBkBC,0BApBlB,EAoBkB;IAnBdL,KAAK,EAAC,YAmBQ;IAlBdM,KAAK,EAAC,MAkBQ;IAjBdC,SAAS,EAAC,UAiBI;IAhBbC,MAAM,EAAE,CAgBK;IAfdC,MAAM,EAAN;EAec,CApBlB;IAMaC,KAAK,WACd,MAAuE,CAAvEN,aAAuEO,oBAAvE,EAAuE;MAA3DC,OAAK,sCAAEC,yBAAF,CAAsD;MAAlCC,IAAI,EAAC;IAA6B,CAAvE;wBAAoD,MAAO;;;;KAA3D,CAAuE,CADzD;sBAGhB,MAUuB,CAVvBV,aAUuBW,+BAVvB,EAUuB,IAVvB,EAUuB;MATVC,KAAK,WACd,MAKM,CALNf,oBAKM,KALN,cAKM,CAJJG,aAEUa,kBAFV,EAEU,IAFV,EAEU;0BADR,MAAQ,CAARb,aAAQc,eAAR,CAAQ,EACA;;;;MAAA,CAFV,CAII,aALN,CAKM,CANQ,CASK;wBADrB,MAAmD,CAAnDd,aAAmDe,iBAAnD,EAAmD;QAA3CC,IAAI,EAAC;MAAsC,CAAnD,EAAkB;0BAAC,MAAuB,CAAvBC,UAAuB,EAAxB;;;;MAAA,CAAlB,CAAmD,EAC9B;;;;IAAA,CAVvB,CAUuB;;;;GAnBzB,CAqBI,CAtBN,GAuBAlB,6BACAC,aAQYkB,oBARZ,EAQY;gBARQC,iCAQR;+DARQA,oCAA2BC,OAQnC;IARqClB,KAAK,EAAC;EAQ3C,CARZ;IAEamB,MAAM,WACf,MAGO,CAHPxB,oBAGO,MAHP,cAGO,CAFLG,aAAsEO,oBAAtE,EAAsE;MAA1DC,OAAK,sCAAEW,oCAA2B,KAA7B;IAAqD,CAAtE;wBAAwD,MAAE;;;;KAA1D,CAEK,EADLnB,aAAkEO,oBAAlE,EAAkE;MAAvDG,IAAI,EAAC,SAAkD;MAAvCF,OAAK,sCAAEC,yBAAF;IAAkC,CAAlE;wBAAoD,MAAE;;;;KAAtD,CACK,CAHP,CAGO,CAJQ;sBADjB,MAAyB,CAAzBa,UAAyB;;;;GAD3B;;EAAA","names":["class","_createElementVNode","id","_createCommentVNode","_createVNode","_component_el_descriptions","title","direction","column","border","extra","_component_el_button","onClick","$options","type","_component_el_descriptions_item","label","_component_el_icon","_component_user","_component_el_tag","size","_hoisted_5","_component_el_dialog","$data","$event","footer","_hoisted_6"],"sourceRoot":"","sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/RequestToAdmin.vue"],"sourcesContent":["<template>\n  <!--详细描述-->\n  <div class=\"dF\">\n    <el-descriptions\n        class=\"margin-top\"\n        title=\"权限信息\"\n        direction=\"vertical\"\n        :column=\"1\"\n        border>\n      <template #extra>\n        <el-button @click=\"requestToAdmin()\" type=\"primary\">申请成为管理员</el-button>\n      </template>\n      <el-descriptions-item>\n        <template #label>\n          <div class=\"cell-item\">\n            <el-icon>\n              <user />\n            </el-icon>\n            当前角色\n          </div>\n        </template>\n        <el-tag size=\"big\"><span id=\"role\"></span></el-tag>\n      </el-descriptions-item>\n    </el-descriptions>\n  </div>\n  <!--申请弹窗-->\n  <el-dialog v-model=\"dialogFormVisibleForRequest\" title=\"管理员申请\">\n    <span>是否确认申请成为管理员？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForRequest = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformRequest()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport User from \"@element-plus/icons/lib/User\";\nimport request from \"../../utils/request\";\nimport $ from '../../assets/js/jquery-3.6.0';\nimport {ElMessage} from \"element-plus\";\nlet userEmail;\nlet role;\n\nexport default {\n  name: \"RequestToAdmin\",\n  components: {\n    User,\n  },\n  data() {\n    return {\n      dialogFormVisibleForRequest: false\n    }\n  },\n  methods: {\n    //申请成为管理员\n    requestToAdmin() {\n      if (role===0) {\n        this.dialogFormVisibleForRequest = true\n      }else if (role===1) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        })\n      }else if (role===2) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        })\n      }else {\n        ElMessage({\n          type: 'warning',\n          message: '审核中，请耐心等待'\n        })\n      }\n    },\n    //确认申请\n    conformRequest() {\n      request.post(\"/user/changeUserToAdminForRequest\",userEmail).then(res =>{\n        ElMessage({\n          type: 'success',\n          message: '已提交申请，请耐心等待'\n        })\n        this.loadData()\n        this.dialogFormVisibleForRequest = false\n      })\n    },\n    //加载数据\n    loadData() {\n      let email = sessionStorage.getItem(\"userEmail\")\n      let reg = new RegExp('\"', \"g\");\n      userEmail = email.replace(reg, \"\");    //正则表达式，将字符串两端的双引号去掉\n      request.post(\"/user/getRole\",userEmail).then(res =>{\n        role = res.data\n        if (role===0) {\n          $('#role').html(\"用户\");\n        }else if (role===1) {\n          $('#role').html(\"管理员\");\n        }else if (role===2) {\n          $('#role').html(\"超级管理员\");\n        }else {\n          $('#role').html(\"待审核的管理员\");\n        }\n      })\n    }\n  },\n  created() {\n    this.loadData()\n  }\n}\n</script>\n\n<style scoped>\n.dF{\n  width: 60%;position: absolute;left: 15%;right: 5%;margin-top: 120px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}