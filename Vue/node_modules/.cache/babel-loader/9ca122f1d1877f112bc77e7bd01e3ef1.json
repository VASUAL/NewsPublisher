{"remainingRequest":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wangjin/Desktop/newspublisher/Vue/src/layout/SuperAdminLogin.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wangjin/Desktop/newspublisher/Vue/src/layout/SuperAdminLogin.vue","mtime":1656145825888},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/babel.config.js","mtime":1655079911438},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgSGVhZE9mV2VsY29tZSBmcm9tICIuLi9jb21wb25lbnRzL0hlYWRPZldlbGNvbWUiOwppbXBvcnQgcmVxdWVzdCBmcm9tICIuLi91dGlscy9yZXF1ZXN0IjsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsgLy9FbGVtZW50LXBsdXPmtojmga/mj5DnpLoKCnZhciB2ZXJpZnk7IC8v6aqM6K+B56CBCgp2YXIgcm9sZTsgLy/nlKjmiLfop5LoibIKCnZhciBpbnB1dEVtYWlsOyAvL+i+k+WFpemCrueusQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTdXBlckFkbWluTG9naW4iLAogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRPZldlbGNvbWU6IEhlYWRPZldlbGNvbWUKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlRm9ybTogewogICAgICAgIGVtYWlsOiAnJywKICAgICAgICB2ZXJpZnlDb2RlOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGVtYWlsOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6YKu566xJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHZlcmlmeUNvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXpqozor4HnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8v5Y+R6YCB6aqM6K+B56CBCiAgICBzZW5kVmVyaWZ5Q29kZTogZnVuY3Rpb24gc2VuZFZlcmlmeUNvZGUoZW1haWwpIHsKICAgICAgaWYgKGVtYWlsID09PSAnJyB8fCBlbWFpbCA9PT0gbnVsbCkgewogICAgICAgIC8v5aaC5p6c6YKu566x5Li656m6CiAgICAgICAgRWxNZXNzYWdlKHsKICAgICAgICAgIC8v5raI5oGv5o+Q56S6CiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl6YKu566xIgogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGlucHV0RW1haWwgPSBlbWFpbDsKICAgICAgICByZXF1ZXN0LnBvc3QoIi91c2VyL3NlbmRFbWFpbEZvckFkbWluIiwgZW1haWwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAiMCIpIHsKICAgICAgICAgICAgLy/or7TmmI7or6XnlKjmiLflrZjlnKjvvIzlj5HpgIHmiJDlip8KICAgICAgICAgICAgdmVyaWZ5ID0gcmVzLmRhdGE7CiAgICAgICAgICAgIHJlcXVlc3QucG9zdCgiL3VzZXIvZ2V0Um9sZSIsIGVtYWlsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAvL+iOt+WPlueUqOaIt+inkuiJsgogICAgICAgICAgICAgIHJvbGUgPSByZXMuZGF0YTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICAgICAgLy/mtojmga/mj5DnpLoKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuiOt+WPluaIkOWKnyIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBFbE1lc3NhZ2UoewogICAgICAgICAgICAgIC8v5raI5oGv5o+Q56S6CiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLor6XnlKjmiLfkuI3lrZjlnKgiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/mj5DkuqTooajljZUKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy/lpoLmnpzooajljZXkuI3nqboKICAgICAgICAgIGlmIChpbnB1dEVtYWlsICE9PSBfdGhpcy5ydWxlRm9ybS5lbWFpbCkgewogICAgICAgICAgICBFbE1lc3NhZ2UoewogICAgICAgICAgICAgIC8v5raI5oGv5o+Q56S6CiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fph43mlrDojrflj5bpqozor4HnoIEiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmICh2ZXJpZnkgIT09IF90aGlzLnJ1bGVGb3JtLnZlcmlmeUNvZGUpIHsKICAgICAgICAgICAgLy/ojrflj5booajljZXkuK3nmoTmlbDmja7opoHpgJrov4cg4oCddGhpcy5ydWxlRm9ybS7lsZ7mgKfigJwg5p2l5a6e546wCiAgICAgICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICAgICAgLy/mtojmga/mj5DnpLoKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIumqjOivgeeggemUmeivryIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJvbGUgPT09IDAgfHwgcm9sZSA9PT0gMSB8fCByb2xlID09PSAzKSB7CiAgICAgICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICAgICAgLy/mtojmga/mj5DnpLoKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuaCqOS4jeaYr+i2hee6p+euoeeQhuWRmCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBFbE1lc3NhZ2UoewogICAgICAgICAgICAgIC8v5raI5oGv5o+Q56S6CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLnmbvlvZXmiJDlip8iCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c2VyRW1haWwiLCBKU09OLnN0cmluZ2lmeShfdGhpcy5ydWxlRm9ybS5lbWFpbCkpOyAvL+WwhueuoeeQhuWRmOeahOmCrueuseWtmOWCqOWcqHNlc3Npb27ph4wKCiAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnL3N1cGVyQWRtaW5Ib21lJyk7IC8v6Lez6L2s5Yiw566h55CG5ZGY6aG16Z2iCgogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL+WmguaenOihqOWNleS4uuepugogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/ph43nva7ooajljZUKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/layout/SuperAdminLogin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n  <!--头部-->\n  <HeadOfWelcome/>\n\n  <div class=\"dT\">\n    <p class=\"p1\">超级管理员登录</p>\n    <div class=\"dS\">\n      <el-form\n          ref=\"ruleForm\"\n          :model=\"ruleForm\"\n          :rules=\"rules\"\n          label-width=\"80px\"\n          class=\"demo-ruleForm\">\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"ruleForm.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"验证码\" prop=\"verifyCode\">\n          <el-input v-model=\"ruleForm.verifyCode\" class=\"el1\"></el-input>\n          <el-button type=\"primary\" @click=\"sendVerifyCode(ruleForm.email)\" class=\"el2\">获取验证码</el-button>\n        </el-form-item>\n        <el-form-item class=\"el3\">\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\" class=\"el4\">登录</el-button>\n          <el-button @click=\"resetForm('ruleForm')\" class=\"el5\">重置</el-button>\n        </el-form-item>\n      </el-form>\n      <router-link to=\"/adminLogin\" class=\"el6\">&lt;&lt;记者登录入口</router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HeadOfWelcome from \"../components/HeadOfWelcome\";\nimport request from \"../utils/request\";\nimport { ElMessage } from 'element-plus'   //Element-plus消息提示\n\nlet verify;   //验证码\nlet role;     //用户角色\nlet inputEmail;  //输入邮箱\n\nexport default {\n  name: \"SuperAdminLogin\",\n  components: {HeadOfWelcome},\n\n  data() {\n    return {\n      ruleForm: {\n        email: '',\n        verifyCode: '',\n      },\n      rules: {\n        email: [\n          {\n            required: true,\n            message: '请输入邮箱',\n            trigger: 'blur',\n          },\n        ],\n        verifyCode: [\n          {\n            required: true,\n            message: '请输入验证码',\n            trigger: 'change',\n          },\n        ],\n      },\n    }\n  },\n  created() {\n\n  },\n  methods: {\n    //发送验证码\n    sendVerifyCode(email) {\n      if (email===''||email===null){  //如果邮箱为空\n        ElMessage({    //消息提示\n          type: \"warning\",\n          message: \"请输入邮箱\"\n        })\n      }else {\n        inputEmail = email\n        request.post(\"/user/sendEmailForAdmin\",email).then(res =>{\n          if (res.code===\"0\") {  //说明该用户存在，发送成功\n            verify = res.data;\n            request.post(\"/user/getRole\",email).then(res =>{      //获取用户角色\n              role = res.data;\n            })\n            ElMessage({    //消息提示\n              type: \"success\",\n              message: \"获取成功\"\n            })\n          }else {\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"该用户不存在\"\n            })\n          }\n        })\n      }\n    },\n    //提交表单\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {    //如果表单不空\n          if (inputEmail!==this.ruleForm.email) {\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"请重新获取验证码\"\n            })\n          }else if (verify!==this.ruleForm.verifyCode) {  //获取表单中的数据要通过 ”this.ruleForm.属性“ 来实现\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"验证码错误\"\n            })\n          }else if (role===0||role===1||role===3) {\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"您不是超级管理员\"\n            })\n          }else {\n            ElMessage({    //消息提示\n              type: \"success\",\n              message: \"登录成功\"\n            })\n            sessionStorage.setItem(\"userEmail\", JSON.stringify(this.ruleForm.email));  //将管理员的邮箱存储在session里\n            this.$router.push('/superAdminHome');    //跳转到管理员页面\n          }\n        } else {            //如果表单为空\n          return false\n        }\n      })\n    },\n    //重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n  },\n}\n</script>\n\n<style scoped>\n.dT{\n  background: white;position: absolute;width: 100%;left: 50%;top: calc(50% + 25px);transform: translate(-50%,-50%);height: calc(100% - 50px);\n}\n.p1{\n  text-align: center;font-size: 22px;color: rgb(64, 158, 255);position: absolute;left: 30%;right: 30%;width: 40%;margin-top: 70px;padding: 10px;\n}\n.dS{\n  position: absolute;left: 33%;width: 30%;right: 35%;margin-top: 160px;\n}\n.el1{\n  width: 45%;margin-right: 5%;\n}\n.el2{\n  width: 50%;\n}\n.el3{\n  display:block;\n}\n.el4{\n  width: 40%;\n}\n.el5{\n  width: 40%;margin-left: 20%;\n}\n.el6{\n  left: 20px; position: relative;width: 100%;color: rgb(96, 98, 102);font-size: 13px;text-align: left;\n}\n</style>"],"sourceRoot":""}]}