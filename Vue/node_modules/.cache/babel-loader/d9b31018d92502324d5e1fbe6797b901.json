{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4e3cf776\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"divFirst\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"p1\"\n}, \"管理员登录\", -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"div2\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"获取验证码\");\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"登录\");\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"重置\");\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"超级管理员登录入口>>\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HeadOfWelcome = _resolveComponent(\"HeadOfWelcome\");\n\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"头部\"), _createVNode(_component_HeadOfWelcome), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_form, {\n    ref: \"ruleForm\",\n    model: $data.ruleForm,\n    rules: $data.rules,\n    \"label-width\": \"80px\",\n    class: \"demo-ruleForm\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"邮箱\",\n      prop: \"email\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.ruleForm.email,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.ruleForm.email = $event)\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      label: \"验证码\",\n      prop: \"verifyCode\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.ruleForm.verifyCode,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.ruleForm.verifyCode = $event),\n        class: \"el1\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"]), _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: _cache[2] || (_cache[2] = $event => $options.sendVerifyCode($data.ruleForm.email)),\n        class: \"el2\"\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      class: \"el3\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: _cache[3] || (_cache[3] = $event => $options.submitForm('ruleForm')),\n        class: \"el4\"\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_button, {\n        onClick: _cache[4] || (_cache[4] = $event => $options.resetForm('ruleForm')),\n        class: \"el5\"\n      }, {\n        default: _withCtx(() => [_hoisted_6]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\"]), _createVNode(_component_router_link, {\n    to: \"/superAdminLogin\",\n    class: \"link1\"\n  }, {\n    default: _withCtx(() => [_hoisted_7]),\n    _: 1\n    /* STABLE */\n\n  })])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;EAGOA,KAAK,EAAC;;;gEACTC,oBAAuB,GAAvB,EAAuB;EAApBD,KAAK,EAAC;AAAc,CAAvB,EAAc,OAAd,EAAmB;AAAA;AAAnB;;;EACKA,KAAK,EAAC;;;iDAYyE;;iDAGR;;iDAChB;;iDAGT;;;;;;;;;;;;;;;6DAvBrDE,2BACAC,aAAgBC,wBAAhB,GACAH,oBAuBM,KAvBN,cAuBM,CAtBJI,UAsBI,EArBJJ,oBAoBM,KApBN,cAoBM,CAnBJE,aAiBUG,kBAjBV,EAiBU;IAhBNC,GAAG,EAAC,UAgBE;IAfLC,KAAK,EAAEC,cAeF;IAdLC,KAAK,EAAED,WAcF;IAbN,eAAY,MAaN;IAZNT,KAAK,EAAC;EAYA,CAjBV;sBAME,MAEe,CAFfG,aAEeQ,uBAFf,EAEe;MAFDC,KAAK,EAAC,IAEL;MAFUC,IAAI,EAAC;IAEf,CAFf;wBACE,MAA8C,CAA9CV,aAA8CW,mBAA9C,EAA8C;oBAA3BL,eAASM,KAAkB;mEAA3BN,eAASM,QAAKC;MAAa,CAA9C;;MAAA,iBAA8C;;;;KADhD,CAEe,EACfb,aAGeQ,uBAHf,EAGe;MAHDC,KAAK,EAAC,KAGL;MAHWC,IAAI,EAAC;IAGhB,CAHf;wBACE,MAA+D,CAA/DV,aAA+DW,mBAA/D,EAA+D;oBAA5CL,eAASQ,UAAmC;mEAA5CR,eAASQ,aAAUD,OAAyB;QAAvBhB,KAAK,EAAC;MAAiB,CAA/D;;MAAA,iBAA+D,EAC/DG,aAA+Fe,oBAA/F,EAA+F;QAApFC,IAAI,EAAC,SAA+E;QAApEC,OAAK,sCAAEC,wBAAeZ,eAASM,KAAxB,CAAF,CAA+D;QAA7Bf,KAAK,EAAC;MAAuB,CAA/F;0BAA8E,MAAK;;;;OAAnF,CAD+D;;;;KADjE,CADe,EAKfG,aAGeQ,uBAHf,EAGe;MAHDX,KAAK,EAAC;IAGL,CAHf,EAAyB;wBACvB,MAAoF,CAApFG,aAAoFe,oBAApF,EAAoF;QAAzEC,IAAI,EAAC,SAAoE;QAAzDC,OAAK,sCAAEC,oBAAU,UAAV,CAAF,CAAoD;QAA1BrB,KAAK,EAAC;MAAoB,CAApF;0BAAsE,MAAE;;;;OAAxE,CAAoF,EACpFG,aAAoEe,oBAApE,EAAoE;QAAxDE,OAAK,sCAAEC,mBAAS,UAAT,CAAF,CAAmD;QAA1BrB,KAAK,EAAC;MAAoB,CAApE;0BAAsD,MAAE;;;;OAAxD,CADoF,EAD7D;;;;IAAA,CAAzB,CALe;;;;GARjB;;EAAA,qBAmBI,EADJG,aAA0EmB,sBAA1E,EAA0E;IAA7DC,EAAE,EAAC,kBAA0D;IAAvCvB,KAAK,EAAC;EAAiC,CAA1E;sBAAiD,MAAW;;;;GAA5D,CACI,CApBN,CAqBI,CAvBN","names":["class","_createElementVNode","_createCommentVNode","_createVNode","_component_HeadOfWelcome","_hoisted_2","_component_el_form","ref","model","$data","rules","_component_el_form_item","label","prop","_component_el_input","email","$event","verifyCode","_component_el_button","type","onClick","$options","_component_router_link","to"],"sourceRoot":"","sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/layout/AdminLogin.vue"],"sourcesContent":["<template>\n  <!--头部-->\n  <HeadOfWelcome/>\n  <div class=\"divFirst\">\n    <p class=\"p1\">管理员登录</p>\n    <div class=\"div2\">\n      <el-form\n          ref=\"ruleForm\"\n          :model=\"ruleForm\"\n          :rules=\"rules\"\n          label-width=\"80px\"\n          class=\"demo-ruleForm\">\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"ruleForm.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"验证码\" prop=\"verifyCode\">\n          <el-input v-model=\"ruleForm.verifyCode\" class=\"el1\"></el-input>\n          <el-button type=\"primary\" @click=\"sendVerifyCode(ruleForm.email)\" class=\"el2\">获取验证码</el-button>\n        </el-form-item>\n        <el-form-item class=\"el3\">\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\" class=\"el4\">登录</el-button>\n          <el-button @click=\"resetForm('ruleForm')\" class=\"el5\">重置</el-button>\n        </el-form-item>\n      </el-form>\n      <router-link to=\"/superAdminLogin\" class=\"link1\">超级管理员登录入口>></router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HeadOfWelcome from \"../components/HeadOfWelcome\";\nimport request from \"../utils/request\";\nimport { ElMessage } from 'element-plus'   //Element-plus消息提示\n\nlet verify;   //验证码\nlet role;     //用户角色\nlet inputEmail;  //输入邮箱\n\nexport default {\n  name: \"AdminLogin\",\n  components: {HeadOfWelcome},\n\n  data() {\n    return {\n      ruleForm: {\n        email: '',\n        verifyCode: '',\n      },\n      rules: {\n        email: [\n          {\n            required: true,\n            message: '请输入邮箱',\n            trigger: 'blur',\n          },\n        ],\n        verifyCode: [\n          {\n            required: true,\n            message: '请输入验证码',\n            trigger: 'change',\n          },\n        ],\n      },\n    }\n  },\n  created() {\n\n  },\n  methods: {\n    //发送验证码\n    sendVerifyCode(email) {\n      if (email===''||email===null){  //如果邮箱为空\n        ElMessage({    //消息提示\n          type: \"warning\",\n          message: \"请输入邮箱\"\n        })\n      }else {\n        inputEmail = email\n        request.post(\"/user/sendEmailForAdmin\",email).then(res =>{\n          if (res.code===\"0\") {  //说明该用户存在，发送成功\n            verify = res.data;\n            request.post(\"/user/getRole\",email).then(res =>{      //获取用户角色\n              role = res.data;\n            })\n            ElMessage({    //消息提示\n              type: \"success\",\n              message: \"获取成功\"\n            })\n          }else {\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"该用户不存在\"\n            })\n          }\n        })\n      }\n    },\n    //提交表单\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {    //如果表单不空\n          if (inputEmail!==this.ruleForm.email) {\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"请重新获取验证码\"\n            })\n          }else if (verify!==this.ruleForm.verifyCode) {  //获取表单中的数据要通过 ”this.ruleForm.属性“ 来实现\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"验证码错误\"\n            })\n          }else if (role===0||role===3) {\n            ElMessage({    //消息提示\n              type: \"warning\",\n              message: \"您不是管理员\"\n            })\n          }else {\n            ElMessage({    //消息提示\n              type: \"success\",\n              message: \"登录成功\"\n            })\n            sessionStorage.setItem(\"userEmail\", JSON.stringify(this.ruleForm.email));  //将管理员的邮箱存储在session里\n            this.$router.push('/adminHome');    //跳转到管理员页面\n          }\n        } else {            //如果表单为空\n          return false\n        }\n      })\n    },\n    //重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n  },\n}\n</script>\n\n<style scoped>\n.divFirst{\n  background: white;position: absolute;width: 100%;left: 50%;top: calc(50% + 25px);transform: translate(-50%,-50%);height: calc(100% - 50px);\n}\n.p1{\n  text-align: center;font-size: 22px;color: rgb(64, 158, 255);position: absolute;left: 30%;right: 30%;width: 40%;margin-top: 70px;padding: 10px;\n}\n.div2{\n  position: absolute;left: 33%;width: 30%;right: 35%;margin-top: 160px;\n}\n.el1{\n  width: 45%;margin-right: 5%;\n}\n.el2{\n  width: 50%;\n}\n.el3{\n  display:block;\n}\n.el4{\n  width: 40%;\n}\n.el5{\n  width: 40%;margin-left: 20%;\n}\n.link1{\n  position: absolute;width: 100%;color: rgb(96, 98, 102);font-size: 13px;text-align: right;\n}\n</style>"]},"metadata":{},"sourceType":"module"}