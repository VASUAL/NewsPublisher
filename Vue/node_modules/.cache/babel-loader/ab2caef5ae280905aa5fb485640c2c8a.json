{"remainingRequest":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js!/Users/wangjin/Desktop/newspublisher/Vue/src/utils/htmlToPdf.js","dependencies":[{"path":"/Users/wangjin/Desktop/newspublisher/Vue/src/utils/htmlToPdf.js","mtime":1656055328382},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/babel.config.js","mtime":1655079911438},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjin/Desktop/newspublisher/Vue/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8g5a+85Ye66aG16Z2i5Li6UERG5qC85byPCmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICJodG1sMmNhbnZhcyI7CmltcG9ydCBKU1BERiBmcm9tICJqc3BkZiI7CmV4cG9ydCBkZWZhdWx0IHsKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSwgb3B0aW9ucykgewogICAgVnVlLnByb3RvdHlwZS5FeHBvcnRTYXZlUGRmID0gZnVuY3Rpb24gKGh0bWxUaXRsZSwgY3VycmVudFRpbWUpIHsKICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGRmQ2VudGVudCIpOwogICAgICBodG1sMmNhbnZhcyhlbGVtZW50LCB7CiAgICAgICAgbG9nZ2luZzogZmFsc2UKICAgICAgfSkudGhlbihmdW5jdGlvbiAoY2FudmFzKSB7CiAgICAgICAgdmFyIHBkZiA9IG5ldyBKU1BERigicCIsICJtbSIsICJhNCIpOyAvLyBBNOe6uO+8jOe6teWQkQoKICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgdmFyIGE0dyA9IDE3MDsKICAgICAgICB2YXIgYTRoID0gMjU3OyAvLyBBNOWkp+Wwj++8jDIxMG1tIHggMjk3bW3vvIzlm5vovrnlkITkv53nlZkyMG1t55qE6L656Led77yM5pi+56S65Yy65Z+fMTcweDI1NwoKICAgICAgICB2YXIgaW1nSGVpZ2h0ID0gTWF0aC5mbG9vcihhNGggKiBjYW52YXMud2lkdGggLyBhNHcpOyAvLyDmjIlBNOaYvuekuuavlOS+i+aNoueul+S4gOmhteWbvuWDj+eahOWDj+e0oOmrmOW6pgoKICAgICAgICB2YXIgcmVuZGVyZWRIZWlnaHQgPSAwOwoKICAgICAgICB3aGlsZSAocmVuZGVyZWRIZWlnaHQgPCBjYW52YXMuaGVpZ2h0KSB7CiAgICAgICAgICB2YXIgcGFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgICAgICAgcGFnZS53aWR0aCA9IGNhbnZhcy53aWR0aDsKICAgICAgICAgIHBhZ2UuaGVpZ2h0ID0gTWF0aC5taW4oaW1nSGVpZ2h0LCBjYW52YXMuaGVpZ2h0IC0gcmVuZGVyZWRIZWlnaHQpOyAvLyDlj6/og73lhoXlrrnkuI3otrPkuIDpobUKICAgICAgICAgIC8vIOeUqGdldEltYWdlRGF0YeWJquijgeaMh+WumuWMuuWfn++8jOW5tueUu+WIsOWJjemdouWIm+W7uueahGNhbnZhc+WvueixoeS4rQoKICAgICAgICAgIHBhZ2UuZ2V0Q29udGV4dCgiMmQiKS5wdXRJbWFnZURhdGEoY3R4LmdldEltYWdlRGF0YSgwLCByZW5kZXJlZEhlaWdodCwgY2FudmFzLndpZHRoLCBNYXRoLm1pbihpbWdIZWlnaHQsIGNhbnZhcy5oZWlnaHQgLSByZW5kZXJlZEhlaWdodCkpLCAwLCAwKTsKICAgICAgICAgIHBkZi5hZGRJbWFnZShwYWdlLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsIDEuMCksICJKUEVHIiwgMTAsIDEwLCBhNHcsIE1hdGgubWluKGE0aCwgYTR3ICogcGFnZS5oZWlnaHQgLyBwYWdlLndpZHRoKSk7IC8vIOa3u+WKoOWbvuWDj+WIsOmhtemdou+8jOS/neeVmTEwbW3ovrnot50KCiAgICAgICAgICByZW5kZXJlZEhlaWdodCArPSBpbWdIZWlnaHQ7CgogICAgICAgICAgaWYgKHJlbmRlcmVkSGVpZ2h0IDwgY2FudmFzLmhlaWdodCkgewogICAgICAgICAgICBwZGYuYWRkUGFnZSgpOwogICAgICAgICAgfSAvLyDlpoLmnpzlkI7pnaLov5jmnInlhoXlrrnvvIzmt7vliqDkuIDkuKrnqbrpobUKICAgICAgICAgIC8vIGRlbGV0ZSBwYWdlOwoKICAgICAgICB9CgogICAgICAgIHBkZi5zYXZlKGh0bWxUaXRsZSArIGN1cnJlbnRUaW1lKTsKICAgICAgfSk7CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/utils/htmlToPdf.js"],"names":["html2canvas","JSPDF","install","Vue","options","prototype","ExportSavePdf","htmlTitle","currentTime","element","document","getElementById","logging","then","canvas","pdf","ctx","getContext","a4w","a4h","imgHeight","Math","floor","width","renderedHeight","height","page","createElement","min","putImageData","getImageData","addImage","toDataURL","addPage","save"],"mappings":"AAAA;AACA,OAAOA,WAAP,MAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,eAAe;AACXC,EAAAA,OADW,mBACFC,GADE,EACGC,OADH,EACY;AACnBD,IAAAA,GAAG,CAACE,SAAJ,CAAcC,aAAd,GAA8B,UAAUC,SAAV,EAAqBC,WAArB,EAAkC;AAC5D,UAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAd;AACAX,MAAAA,WAAW,CAACS,OAAD,EAAU;AACjBG,QAAAA,OAAO,EAAE;AADQ,OAAV,CAAX,CAEGC,IAFH,CAEQ,UAAUC,MAAV,EAAkB;AACtB,YAAIC,GAAG,GAAG,IAAId,KAAJ,CAAU,GAAV,EAAe,IAAf,EAAqB,IAArB,CAAV,CADsB,CACe;;AACrC,YAAIe,GAAG,GAAGF,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAV;AACA,YAAIC,GAAG,GAAG,GAAV;AAAe,YAAIC,GAAG,GAAG,GAAV,CAHO,CAGO;;AAC7B,YAAIC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWH,GAAG,GAAGL,MAAM,CAACS,KAAb,GAAqBL,GAAhC,CAAhB,CAJsB,CAI+B;;AACrD,YAAIM,cAAc,GAAG,CAArB;;AAEA,eAAOA,cAAc,GAAGV,MAAM,CAACW,MAA/B,EAAuC;AACnC,cAAIC,IAAI,GAAGhB,QAAQ,CAACiB,aAAT,CAAuB,QAAvB,CAAX;AACAD,UAAAA,IAAI,CAACH,KAAL,GAAaT,MAAM,CAACS,KAApB;AACAG,UAAAA,IAAI,CAACD,MAAL,GAAcJ,IAAI,CAACO,GAAL,CAASR,SAAT,EAAoBN,MAAM,CAACW,MAAP,GAAgBD,cAApC,CAAd,CAHmC,CAG8B;AAEjE;;AACAE,UAAAA,IAAI,CAACT,UAAL,CAAgB,IAAhB,EAAsBY,YAAtB,CAAmCb,GAAG,CAACc,YAAJ,CAAiB,CAAjB,EAAoBN,cAApB,EAAoCV,MAAM,CAACS,KAA3C,EAAkDF,IAAI,CAACO,GAAL,CAASR,SAAT,EAAoBN,MAAM,CAACW,MAAP,GAAgBD,cAApC,CAAlD,CAAnC,EAA2I,CAA3I,EAA8I,CAA9I;AACAT,UAAAA,GAAG,CAACgB,QAAJ,CAAaL,IAAI,CAACM,SAAL,CAAe,YAAf,EAA6B,GAA7B,CAAb,EAAgD,MAAhD,EAAwD,EAAxD,EAA4D,EAA5D,EAAgEd,GAAhE,EAAqEG,IAAI,CAACO,GAAL,CAAST,GAAT,EAAcD,GAAG,GAAGQ,IAAI,CAACD,MAAX,GAAoBC,IAAI,CAACH,KAAvC,CAArE,EAPmC,CAOiF;;AAEpHC,UAAAA,cAAc,IAAIJ,SAAlB;;AACA,cAAII,cAAc,GAAGV,MAAM,CAACW,MAA5B,EAAoC;AAAEV,YAAAA,GAAG,CAACkB,OAAJ;AAAe,WAVlB,CAUkB;AACrD;;AACH;;AACDlB,QAAAA,GAAG,CAACmB,IAAJ,CAAS3B,SAAS,GAAGC,WAArB;AACH,OAvBD;AAwBH,KA1BD;AA2BH;AA7BU,CAAf","sourcesContent":["// 导出页面为PDF格式\nimport html2canvas from \"html2canvas\"\nimport JSPDF from \"jspdf\"\nexport default {\n    install (Vue, options) {\n        Vue.prototype.ExportSavePdf = function (htmlTitle, currentTime) {\n            var element = document.getElementById(\"pdfCentent\")\n            html2canvas(element, {\n                logging: false\n            }).then(function (canvas) {\n                var pdf = new JSPDF(\"p\", \"mm\", \"a4\") // A4纸，纵向\n                var ctx = canvas.getContext(\"2d\")\n                var a4w = 170; var a4h = 257 // A4大小，210mm x 297mm，四边各保留20mm的边距，显示区域170x257\n                var imgHeight = Math.floor(a4h * canvas.width / a4w) // 按A4显示比例换算一页图像的像素高度\n                var renderedHeight = 0\n\n                while (renderedHeight < canvas.height) {\n                    var page = document.createElement(\"canvas\")\n                    page.width = canvas.width\n                    page.height = Math.min(imgHeight, canvas.height - renderedHeight)// 可能内容不足一页\n\n                    // 用getImageData剪裁指定区域，并画到前面创建的canvas对象中\n                    page.getContext(\"2d\").putImageData(ctx.getImageData(0, renderedHeight, canvas.width, Math.min(imgHeight, canvas.height - renderedHeight)), 0, 0)\n                    pdf.addImage(page.toDataURL(\"image/jpeg\", 1.0), \"JPEG\", 10, 10, a4w, Math.min(a4h, a4w * page.height / page.width)) // 添加图像到页面，保留10mm边距\n\n                    renderedHeight += imgHeight\n                    if (renderedHeight < canvas.height) { pdf.addPage() }// 如果后面还有内容，添加一个空页\n                    // delete page;\n                }\n                pdf.save(htmlTitle + currentTime)\n            })\n        }\n    }\n}\n"]}]}