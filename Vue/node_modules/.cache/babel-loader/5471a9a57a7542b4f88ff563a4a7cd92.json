{"ast":null,"code":"import User from \"@element-plus/icons/lib/User\";\nimport request from \"../../utils/request\";\nimport $ from '../../assets/js/jquery-3.6.0';\nimport { ElMessage } from \"element-plus\";\nlet userEmail;\nlet role;\nexport default {\n  name: \"RequestToAdmin\",\n  components: {\n    User\n  },\n\n  data() {\n    return {\n      dialogFormVisibleForRequest: false\n    };\n  },\n\n  methods: {\n    //申请成为管理员\n    requestToAdmin() {\n      if (role === 0) {\n        this.dialogFormVisibleForRequest = true;\n      } else if (role === 1) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        });\n      } else if (role === 2) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        });\n      } else {\n        ElMessage({\n          type: 'warning',\n          message: '审核中，请耐心等待'\n        });\n      }\n    },\n\n    //确认申请\n    conformRequest() {\n      request.post(\"/user/changeUserToAdminForRequest\", userEmail).then(res => {\n        ElMessage({\n          type: 'success',\n          message: '已提交申请，请耐心等待'\n        });\n        this.loadData();\n        this.dialogFormVisibleForRequest = false;\n      });\n    },\n\n    //加载数据\n    loadData() {\n      let email = sessionStorage.getItem(\"userEmail\");\n      let reg = new RegExp('\"', \"g\");\n      userEmail = email.replace(reg, \"\"); //正则表达式，将字符串两端的双引号去掉\n\n      request.post(\"/user/getRole\", userEmail).then(res => {\n        role = res.data;\n\n        if (role === 0) {\n          $('#role').html(\"用户\");\n        } else if (role === 1) {\n          $('#role').html(\"管理员\");\n        } else if (role === 2) {\n          $('#role').html(\"超级管理员\");\n        } else {\n          $('#role').html(\"待审核的管理员\");\n        }\n      });\n    }\n\n  },\n\n  created() {\n    this.loadData();\n  }\n\n};","map":{"version":3,"mappings":"AAsCA,OAAOA,IAAP,MAAiB,8BAAjB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,CAAP,MAAc,8BAAd;AACA,SAAQC,SAAR,QAAwB,cAAxB;AACA,IAAIC,SAAJ;AACA,IAAIC,IAAJ;AAEA,eAAe;EACbC,IAAI,EAAE,gBADO;EAEbC,UAAU,EAAE;IACVP;EADU,CAFC;;EAKbQ,IAAI,GAAG;IACL,OAAO;MACLC,2BAA2B,EAAE;IADxB,CAAP;EAGD,CATY;;EAUbC,OAAO,EAAE;IACP;IACAC,cAAc,GAAG;MACf,IAAIN,IAAI,KAAG,CAAX,EAAc;QACZ,KAAKI,2BAAL,GAAmC,IAAnC;MACD,CAFD,MAEM,IAAIJ,IAAI,KAAG,CAAX,EAAc;QAClBF,SAAS,CAAC;UACRS,IAAI,EAAE,SADE;UAERC,OAAO,EAAE;QAFD,CAAD,CAAT;MAID,CALK,MAKA,IAAIR,IAAI,KAAG,CAAX,EAAc;QAClBF,SAAS,CAAC;UACRS,IAAI,EAAE,SADE;UAERC,OAAO,EAAE;QAFD,CAAD,CAAT;MAID,CALK,MAKA;QACJV,SAAS,CAAC;UACRS,IAAI,EAAE,SADE;UAERC,OAAO,EAAE;QAFD,CAAD,CAAT;MAIF;IACD,CArBM;;IAsBP;IACAC,cAAc,GAAG;MACfb,OAAO,CAACc,IAAR,CAAa,mCAAb,EAAiDX,SAAjD,EAA4DY,IAA5D,CAAiEC,GAAE,IAAI;QACrEd,SAAS,CAAC;UACRS,IAAI,EAAE,SADE;UAERC,OAAO,EAAE;QAFD,CAAD,CAAT;QAIA,KAAKK,QAAL;QACA,KAAKT,2BAAL,GAAmC,KAAnC;MACD,CAPD;IAQD,CAhCM;;IAiCP;IACAS,QAAQ,GAAG;MACT,IAAIC,KAAI,GAAIC,cAAc,CAACC,OAAf,CAAuB,WAAvB,CAAZ;MACA,IAAIC,GAAE,GAAI,IAAIC,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAV;MACAnB,SAAQ,GAAIe,KAAK,CAACK,OAAN,CAAcF,GAAd,EAAmB,EAAnB,CAAZ,CAHS,CAG8B;;MACvCrB,OAAO,CAACc,IAAR,CAAa,eAAb,EAA6BX,SAA7B,EAAwCY,IAAxC,CAA6CC,GAAE,IAAI;QACjDZ,IAAG,GAAIY,GAAG,CAACT,IAAX;;QACA,IAAIH,IAAI,KAAG,CAAX,EAAc;UACZH,CAAC,CAAC,OAAD,CAAD,CAAWuB,IAAX,CAAgB,IAAhB;QACD,CAFD,MAEM,IAAIpB,IAAI,KAAG,CAAX,EAAc;UAClBH,CAAC,CAAC,OAAD,CAAD,CAAWuB,IAAX,CAAgB,KAAhB;QACD,CAFK,MAEA,IAAIpB,IAAI,KAAG,CAAX,EAAc;UAClBH,CAAC,CAAC,OAAD,CAAD,CAAWuB,IAAX,CAAgB,OAAhB;QACD,CAFK,MAEA;UACJvB,CAAC,CAAC,OAAD,CAAD,CAAWuB,IAAX,CAAgB,SAAhB;QACF;MACD,CAXD;IAYF;;EAlDO,CAVI;;EA8DbC,OAAO,GAAG;IACR,KAAKR,QAAL;EACF;;AAhEa,CAAf","names":["User","request","$","ElMessage","userEmail","role","name","components","data","dialogFormVisibleForRequest","methods","requestToAdmin","type","message","conformRequest","post","then","res","loadData","email","sessionStorage","getItem","reg","RegExp","replace","html","created"],"sourceRoot":"","sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/views/user/RequestToAdmin.vue"],"sourcesContent":["<template>\n  <!--详细描述-->\n  <div class=\"dF\">\n    <el-descriptions\n        class=\"margin-top\"\n        title=\"权限信息\"\n        direction=\"vertical\"\n        :column=\"1\"\n        border>\n      <template #extra>\n        <el-button @click=\"requestToAdmin()\" type=\"primary\">申请成为管理员</el-button>\n      </template>\n      <el-descriptions-item>\n        <template #label>\n          <div class=\"cell-item\">\n            <el-icon>\n              <user />\n            </el-icon>\n            当前角色\n          </div>\n        </template>\n        <el-tag size=\"big\"><span id=\"role\"></span></el-tag>\n      </el-descriptions-item>\n    </el-descriptions>\n  </div>\n  <!--申请弹窗-->\n  <el-dialog v-model=\"dialogFormVisibleForRequest\" title=\"管理员申请\">\n    <span>是否确认申请成为管理员？</span>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisibleForRequest = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"conformRequest()\">确定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport User from \"@element-plus/icons/lib/User\";\nimport request from \"../../utils/request\";\nimport $ from '../../assets/js/jquery-3.6.0';\nimport {ElMessage} from \"element-plus\";\nlet userEmail;\nlet role;\n\nexport default {\n  name: \"RequestToAdmin\",\n  components: {\n    User,\n  },\n  data() {\n    return {\n      dialogFormVisibleForRequest: false\n    }\n  },\n  methods: {\n    //申请成为管理员\n    requestToAdmin() {\n      if (role===0) {\n        this.dialogFormVisibleForRequest = true\n      }else if (role===1) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        })\n      }else if (role===2) {\n        ElMessage({\n          type: 'warning',\n          message: '您已是管理员'\n        })\n      }else {\n        ElMessage({\n          type: 'warning',\n          message: '审核中，请耐心等待'\n        })\n      }\n    },\n    //确认申请\n    conformRequest() {\n      request.post(\"/user/changeUserToAdminForRequest\",userEmail).then(res =>{\n        ElMessage({\n          type: 'success',\n          message: '已提交申请，请耐心等待'\n        })\n        this.loadData()\n        this.dialogFormVisibleForRequest = false\n      })\n    },\n    //加载数据\n    loadData() {\n      let email = sessionStorage.getItem(\"userEmail\")\n      let reg = new RegExp('\"', \"g\");\n      userEmail = email.replace(reg, \"\");    //正则表达式，将字符串两端的双引号去掉\n      request.post(\"/user/getRole\",userEmail).then(res =>{\n        role = res.data\n        if (role===0) {\n          $('#role').html(\"用户\");\n        }else if (role===1) {\n          $('#role').html(\"管理员\");\n        }else if (role===2) {\n          $('#role').html(\"超级管理员\");\n        }else {\n          $('#role').html(\"待审核的管理员\");\n        }\n      })\n    }\n  },\n  created() {\n    this.loadData()\n  }\n}\n</script>\n\n<style scoped>\n.dF{\n  width: 60%;position: absolute;left: 15%;right: 5%;margin-top: 120px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}