{"ast":null,"code":"import { ArrowDown } from \"@element-plus/icons\";\nimport request from \"../utils/request\";\nimport $ from \"../assets/js/jquery-3.6.0\";\nimport { ElMessage } from \"element-plus\";\nlet email;\nexport default {\n  name: \"HeadOfHome\",\n  components: {\n    ArrowDown\n  },\n\n  data() {\n    return {\n      searchContent: '',\n      loginVisible: false,\n      notLoginVisible: false,\n      boyHead: false,\n      girlHead: false\n    };\n  },\n\n  methods: {\n    //退出登录\n    logout() {\n      sessionStorage.removeItem(\"userEmail\");\n      this.$router.push('/');\n      this.loginVisible = false;\n      this.notLoginVisible = true;\n    },\n\n    //加载时判断是否登录\n    loadLoginStateAndPetname() {\n      let userEmail = sessionStorage.getItem(\"userEmail\");\n\n      if (userEmail === null || userEmail === '') {\n        //说明未登录\n        this.notLoginVisible = true;\n        this.loginVisible = false;\n        email = userEmail;\n      } else {\n        this.notLoginVisible = false;\n        this.loginVisible = true;\n        let reg = new RegExp('\"', \"g\");\n        let newStr = userEmail.replace(reg, \"\"); //正则表达式，将字符串两端的双引号去掉\n\n        email = newStr;\n        request.post(\"/user/get\", newStr).then(res => {\n          $('#petname').text(res.data.petname);\n\n          if (res.data.sex === \"女\") {\n            this.girlHead = true;\n            this.boyHead = false;\n          } else {\n            this.girlHead = false;\n            this.boyHead = true;\n          }\n        });\n      }\n    },\n\n    //搜索\n    search() {\n      if (this.searchContent === null || this.searchContent === '') {\n        ElMessage({\n          type: 'warning',\n          message: '搜索内容不能为空'\n        });\n      } else if (email === null || email === \"\") {\n        this.$router.push({\n          path: '/searchResult',\n          query: {\n            searchContent: this.searchContent\n          }\n        });\n      } else {\n        request.get(\"/search/saveUserSearchContent\", {\n          params: {\n            userEmail: email,\n            searchContent: this.searchContent\n          }\n        }).then(res => {\n          this.$router.push({\n            path: '/searchResult',\n            query: {\n              searchContent: this.searchContent\n            }\n          });\n        });\n      }\n    }\n\n  },\n\n  created() {\n    document.body.style.backgroundColor = \"#f6f6f6\"; //设置背景色\n\n    this.loadLoginStateAndPetname();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["ArrowDown","request","$","ElMessage","email","name","components","data","searchContent","loginVisible","notLoginVisible","boyHead","girlHead","methods","logout","sessionStorage","removeItem","$router","push","loadLoginStateAndPetname","userEmail","getItem","reg","RegExp","newStr","replace","post","then","res","text","petname","sex","search","type","message","path","query","get","params","created","document","body","style","backgroundColor"],"sourceRoot":"","sources":["/Users/wangjin/Desktop/newspublisher/Vue/src/components/HeadOfHome.vue"],"sourcesContent":["<template>\n  <div class=\"divF5\">\n    <img src=\"../assets/photo/logo.png\" alt=\"\" class=\"img1\">\n    <el-input v-model=\"searchContent\" placeholder=\"搜索网站内容\"  class=\"el1\"/>\n    <el-button type=\"primary\" class=\"el2\" @click=\"search()\">搜索</el-button>\n    <!--登录状态显示-->\n    <div v-if=\"loginVisible\" class=\"div2\">\n      <img v-if=\"boyHead\" src=\"../assets/photo/boy.png\" alt=\"\" class=\"img2\">\n      <img v-if=\"girlHead\" src=\"../assets/photo/girl.png\" alt=\"\" class=\"img2\">\n      <!--下拉菜单-->\n      <el-dropdown class=\"el3\">\n        <span class=\"el-dropdown-link\">\n          <span id=\"petname\" class=\"span1\"></span>\n          <el-icon class=\"el-icon--right\">\n            <arrow-down class=\"arrow1\" />\n          </el-icon>\n        </span>\n        <template #dropdown>\n          <el-dropdown-menu>\n            <el-dropdown-item @click=\"$router.push('/userHome')\">个人中心</el-dropdown-item>\n            <el-dropdown-item @click=\"logout()\">退出</el-dropdown-item>\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n    </div>\n    <!--未登录状态显示-->\n    <div v-if=\"notLoginVisible\" class=\"div3\">\n      <router-link to=\"/userLogin\" class=\"link1\">登录/注册</router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {ArrowDown} from \"@element-plus/icons\";\nimport request from \"../utils/request\";\nimport $ from \"../assets/js/jquery-3.6.0\";\nimport {ElMessage} from \"element-plus\";\n\nlet email;\n\nexport default {\n  name: \"HeadOfHome\",\n  components: {\n    ArrowDown,\n  },\n  data() {\n    return {\n      searchContent: '',\n      loginVisible: false,\n      notLoginVisible: false,\n      boyHead: false,\n      girlHead: false\n    }\n  },\n  methods: {\n    //退出登录\n    logout() {\n      sessionStorage.removeItem(\"userEmail\")\n      this.$router.push('/')\n      this.loginVisible = false\n      this.notLoginVisible = true\n    },\n    //加载时判断是否登录\n    loadLoginStateAndPetname() {\n      let userEmail = sessionStorage.getItem(\"userEmail\")\n      if (userEmail===null||userEmail==='') {   //说明未登录\n        this.notLoginVisible = true\n        this.loginVisible = false\n        email = userEmail\n      }else {\n        this.notLoginVisible = false\n        this.loginVisible = true\n        let reg = new RegExp('\"', \"g\");\n        let newStr = userEmail.replace(reg, \"\");    //正则表达式，将字符串两端的双引号去掉\n        email = newStr\n        request.post(\"/user/get\",newStr).then(res =>{\n          $('#petname').text(res.data.petname)\n          if (res.data.sex===\"女\") {\n            this.girlHead = true\n            this.boyHead = false\n          }else {\n            this.girlHead = false\n            this.boyHead = true\n          }\n        })\n      }\n    },\n    //搜索\n    search() {\n      if (this.searchContent===null||this.searchContent==='') {\n        ElMessage({\n          type: 'warning',\n          message: '搜索内容不能为空'\n        })\n      }else if (email===null||email===\"\") {\n        this.$router.push({\n          path: '/searchResult',\n          query: {\n            searchContent: this.searchContent\n          }\n        })\n      }else {\n        request.get(\"/search/saveUserSearchContent\",{\n          params: {\n            userEmail: email,\n            searchContent: this.searchContent\n          }\n        }).then(res =>{\n          this.$router.push({\n            path: '/searchResult',\n            query: {\n              searchContent: this.searchContent\n            }\n          })\n        })\n      }\n    }\n  },\n  created() {\n    document.body.style.backgroundColor=\"#f6f6f6\";  //设置背景色\n    this.loadLoginStateAndPetname()\n  }\n}\n</script>\n\n<style scoped>\n.divF5{\n  background: white;height: 50px;width: 100%;border-bottom: 1.5px #f0f0f0 solid;position: absolute;margin-top: 0;\n}\n.img1{\n  position: absolute;height: 65%;top: 50%;transform: translate(-50%,-50%);left: 20%;\n}\n.el1{\n  position: absolute;width: 23%;height: 40px;transform: translate(-50%,-50%);left: 48%;top: 50%;\n}\n.el2{\n  position: absolute;width: 70px;height: 40px;transform: translate(-50%, -50%);left: 65%;top: 50%;\n}\n.div2{\n  position: absolute;width: 20%;height: 40px;transform: translate(-50%,-50%);top: 50%;left: 80%;text-align: center;\n}\n.img2{\n  height: 40px;width: 40px;margin-left: -10px;\n}\n.el3{\n  position: absolute;transform: translate(-50%,-50%);left: 80%;top: 50%;font-size: 16px;width: 150px;text-align: center;\n}\n.span1{\n  font-size: 15px;\n}\n.arrow1{\n  position: relative;top: 3px;\n}\n.div3{\n  position: absolute;transform: translate(-50%, -50%);left: 80%;top: 50%;font-size: 16px;width: 100px;text-align: center;\n}\n.link1{\n  color:black;\n}\n</style>"]},"metadata":{},"sourceType":"module"}